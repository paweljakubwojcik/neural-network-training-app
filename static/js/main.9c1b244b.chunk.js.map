{"version":3,"sources":["context/Data.tsx","util/unNormalizeTensor.ts","constants/optimizers.ts","constants/index.ts","util/normalizeTensor.ts","context/Tensorflow.tsx","styles/globalStyles.js","styles/MaterialTheme.js","components/StyledCard.jsx","styles/constants.js","components/Layout.tsx","components/CounterControl.tsx","containers/LayersControls.jsx","components/NetworkDiagram.tsx","containers/ModelOptions.jsx","util/dataConverter.ts","components/FileInput.tsx","containers/dataForm/DataFromDiskForm.tsx","containers/dataForm/DataFromURLForm.tsx","containers/dataForm/ChooseInputOutputs.tsx","containers/dataForm/DataForm.tsx","util/mathFunctionGenerator.ts","containers/dataForm/MathFunctionGenerator.tsx","containers/TrainingDataForm.tsx","containers/EvaluationDataForm.tsx","containers/LearningSettings.jsx","components/PopMenu.tsx","components/Chart.tsx","components/ChartFullScreen.tsx","components/ChartContainer.tsx","hooks/useChartData.ts","components/ErrorMessage.tsx","containers/TrainingSection.tsx","containers/EvaluationSection.jsx","pages/Main.jsx","App.jsx","index.js"],"names":["DataContext","createContext","learningData","evaluationData","initialInputOutputVector","asTensor","tf","keys","data","useDataObject","useState","inputs","setInputs","labels","setLabels","scatter","setScatter","useEffect","merged","Object","entries","filter","key","reduce","arraySync","forEach","value","index","console","log","getDataSetter","useCallback","setter","Tensor","existing","tensorList","values","map","getDataRemover","fromEntries","addInput","addLabel","removeInput","removeLabel","DataProvider","children","props","Provider","useData","useContext","normalizeTensor","normalizedTensor","Min","Max","mul","sub","add","OPTIMIZERS","sgd","name","constructor","train","parameters","type","defaultValue","description","momentum","adam","rmsprop","ACTIVATION_IDENTIFIRES","LOSSES_FUNCTIONS","losses","METRICS","metrics","tensor","max","min","div","initialModelSettings","layers","units","activation","adjustable","optimizer","optimizerOptions","learningRate","loss","metric","initialLearningSettings","batchSize","epochs","normalize","TensorflowContext","modelSettings","learningSettings","isCompiled","isTraining","trainModel","a","evaulateData","compileModel","setLayersUnits","layerName","newValue","addLayer","removeLayer","setActivationFunction","stopTraining","setLearningOption","option","setOptimizer","newOptimazer","setOptimizerOption","setLoss","setMetric","TensorflowProvider","model","useRef","setCompiled","setTraining","setModelSettings","setLearningSettings","state","layerToChange","find","layer","length","splice","current","dense","inputShape","undefined","compile","summary","onEpochEndCallback","onTrainBeginCallback","learningInput","learningLabels","inputKeys","labelKeys","input","inputMin","inputMax","label","labelMin","labelMax","print","MAX_TEST","MIN_TEST","testVector","k","reshape","fit","shuffle","validationSplit","yieldEvery","callbacks","onTrainBegin","onEpochEnd","epoch","logs","currentMetricName","includes","currentTrainingLog","x","y","val","predictedTensor","predict","unNormalizeTensor","predictedArray","testArray","currentPrediction","j","i","testInput","testLabels","evaluation","evaluate","finalPrediction","errorTensor","prediction","error","options","prev","newOptimizer","isNaN","newState","useTensorflow","GlobalStyles","createGlobalStyle","theme","palette","background","default","text","secondary","primary","main","light","contrastText","createMuiTheme","overrides","MuiFormControl","root","margin","StyledCard","styled","Card","StyledCardHeader","header","Header","Container","Column","gridName","Row","h1","CounterControl","setCounter","step","count","styles","inputRef","toString","style","display","IconButton","onClick","size","disabled","fontSize","StyledInput","ref","onInput","e","target","valueAsNumber","LayersControls","LayerControl","marginRight","Select","labelId","onChange","func","MenuItem","Title","slice","justifyContent","Button","startIcon","h3","NetworkDiagram","color","nodes","numberOfNodes","step_x","Array","fill","zero","lines","node","x1","y1","x2","y2","push","start","end","curr","width","height","position","zIndex","Line","Circle","top","left","line","ModelOptions","FormControl","InputLabel","id","method","flexWrap","maxWidth","Input","getDataFromCSVFile","file","Promise","res","rej","Papa","parse","complete","errors","fields","meta","skipEmptyLines","dynamicTyping","transformHeader","parseFloat","FileInput","forwardRef","helperText","fileInputVisibility","setFileInputVis","fileInputHover","setFileInputHover","handleBodyDrag","relatedTarget","document","addEventListener","removeEventListener","$visibility","accept","onDragEnter","onDragLeave","Label","hover","htmlFor","DataFromDiskForm","setData","setFields","setFileName","handleUpload","files","item","variant","click","DataFromURLForm","URL","setURL","handleClick","fetch","split","reverse","json","alignItems","TextField","fullWidth","ChooseInputOutput","dataContext","inputToRemove","labelToRemove","inputToAdd","labelToAdd","obj","list","setList","title","formState","VectorColumn","setHover","onMouseEnter","onMouseLeave","handleDelete","select","field","visible","TextFieldContainer","minWidth","transform","transition","AddButton","useTheme","shadows","bottom","boxShadow","backgroundColor","DEFAULT_MAX","DEFAULT_LENGTH","getNoise","level","Math","random","getXs","Error","mathFunctionGenerator","linear","params","b","noise","exp","E","pow","sin","w","PI","gauss","sigma","sqrt","defaultParams","paramMap","concat","defaults","FUNC","MathFunctionGenerator","setFunction","setParams","ButtonGroup","param","generated","DataForm","whichData","FILE","setMethod","MATH","TrainingDataForm","LearningSettings","FormControlLabel","control","Checkbox","checked","PopMenu","handleClose","open","anchorEl","Menu","keepMounted","onClose","op","selected","Chart","register","registerables","plugin","beforeDraw","chart","ctx","canvas","getContext","save","globalCompositeOperation","fillStyle","fillRect","restore","ykeys","xkeys","chartInstance","update","destroy","warn","xAxisKey","setXAxisKey","yAxisKey","setYAxisKey","xOptions","setXOptions","yOptions","setYOptions","xButton","yButton","canvasRef","reference","parsing","scales","font","plugins","InvisibleButton","v","right","button","ChartFullScreen","MODAL_CHART_ID","StyledModal","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","ModalCard","image","getChart","toBase64Image","downloadLink","createElement","href","download","downloadPicture","Modal","ChartContainer","modalOpen","setModaleOpen","chartData","setChartData","deepEqual","datasets","useChartData","marginLeft","ErrorMessage","TrainingSection","setErrors","trainingLogs","setTrainingLogs","trainingValLogs","setTrainingValLogs","trainingEffects","setTrainingEffects","MainColor","SecondaryColor","handleTrainModel","showLine","borderColor","pointRadius","animation","endIcon","message","evaluationResults","setEvaluationResults","inputProps","readOnly","Main","App","ThemeProvider","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.9c1b244b.chunk.js","sourcesContent":["import { createContext, useContext, useState, ReactNode, useEffect } from 'react'\r\nimport * as tf from '@tensorflow/tfjs'\r\nimport { Tensor, TensorLike } from '@tensorflow/tfjs'\r\nimport { useCallback } from 'react'\r\n\r\nconst initialState = {\r\n    learningData: {} as DataObject,\r\n    evaluationData: {} as DataObject,\r\n}\r\n\r\nconst DataContext = createContext({\r\n    ...initialState,\r\n})\r\n\r\ntype TensorsSet = {\r\n    [name: string]: Tensor | TensorLike\r\n}\r\n\r\nexport type InputOutputVector = {\r\n    data: TensorsSet\r\n    asTensor: Tensor\r\n    keys: string[]\r\n}\r\n\r\nexport type DataObject = {\r\n    inputs: InputOutputVector\r\n    labels: InputOutputVector\r\n    scatter: { [key: string]: number }[]\r\n    addInput: (data: TensorsSet) => void\r\n    addLabel: (data: TensorsSet) => void\r\n    removeInput: (key: string | undefined) => void\r\n    removeLabel: (key: string | undefined) => void\r\n}\r\n\r\nconst initialInputOutputVector = {\r\n    asTensor: tf.tensor([]),\r\n    keys: [],\r\n    data: {},\r\n}\r\n\r\nfunction useDataObject(): DataObject {\r\n    const [inputs, setInputs] = useState<InputOutputVector>(initialInputOutputVector)\r\n    const [labels, setLabels] = useState<InputOutputVector>(initialInputOutputVector)\r\n    const [scatter, setScatter] = useState<{ [key: string]: number }[]>([])\r\n\r\n    useEffect(() => {\r\n        const merged = { ...inputs.data, ...labels.data }\r\n        /* const keys = Object.keys(merged)\r\n        if (!keys.length) return\r\n\r\n        const tensor = tf.tensor([inputs.asTensor.arraySync(), labels.asTensor.arraySync()])\r\n        console.log(tensor.shape)\r\n        const scatter = (tensor.reshape([-1, tensor.shape[0]]).arraySync() as number[][]).map(\r\n            (array) => Object.fromEntries(array.map((value, index) => [keys[index], value]))\r\n        ) */\r\n\r\n        const scatter = Object.entries(merged)\r\n            .filter(([key]) => key !== 'keys' && key !== 'asTensor')\r\n            .reduce((scatter, [key, value]) => {\r\n                const asArray = (value as Tensor).arraySync() as number[]\r\n                asArray.forEach((value, index) => {\r\n                    scatter[index] = { ...scatter[index], [key]: value }\r\n                })\r\n                return scatter\r\n            }, [] as { [key: string]: number }[])\r\n\r\n        setScatter(scatter)\r\n\r\n        console.log({ inputs, labels })\r\n    }, [inputs, labels])\r\n\r\n    const getDataSetter = useCallback(\r\n        (setter: any) => (data: TensorsSet) => {\r\n            //check for TensorLikeObjects\r\n            Object.entries(data).forEach(([key, value]) => {\r\n                if (!(value instanceof Tensor)) {\r\n                    data[key] = tf.tensor(value)\r\n                }\r\n            })\r\n            setter((existing: InputOutputVector) => {\r\n                const tensorList = { ...existing.data, ...data }\r\n                return {\r\n                    data: tensorList,\r\n                    asTensor: tf.tensor(\r\n                        Object.values(tensorList).map((value) => (value as Tensor).arraySync())\r\n                    ),\r\n                    keys: Object.keys(tensorList),\r\n                }\r\n            })\r\n        },\r\n        []\r\n    )\r\n\r\n    const getDataRemover = useCallback(\r\n        (setter: any) => (key: string | undefined) => {\r\n            if (!key) return\r\n            setter((existing: InputOutputVector) => {\r\n                const tensorList = Object.fromEntries(\r\n                    Object.entries(existing.data).filter(([name]) => name !== key)\r\n                ) as TensorsSet\r\n                return {\r\n                    data: tensorList,\r\n                    asTensor: tf.tensor(\r\n                        Object.values(tensorList).map((value) => (value as Tensor).arraySync())\r\n                    ),\r\n                    keys: Object.keys(tensorList),\r\n                }\r\n            })\r\n        },\r\n        []\r\n    )\r\n\r\n    const addInput = getDataSetter(setInputs)\r\n    const addLabel = getDataSetter(setLabels)\r\n    const removeInput = getDataRemover(setInputs)\r\n    const removeLabel = getDataRemover(setLabels)\r\n\r\n    return {\r\n        inputs,\r\n        labels,\r\n        addInput,\r\n        addLabel,\r\n        removeInput,\r\n        removeLabel,\r\n        scatter,\r\n    }\r\n}\r\n\r\nfunction DataProvider({ children, ...props }: { children: ReactNode }) {\r\n    const learningData = useDataObject()\r\n    const evaluationData = useDataObject()\r\n\r\n    return (\r\n        <DataContext.Provider\r\n            value={{\r\n                learningData,\r\n                evaluationData,\r\n            }}\r\n            {...props}\r\n        >\r\n            {children}\r\n        </DataContext.Provider>\r\n    )\r\n}\r\n\r\nconst useData = () => useContext(DataContext)\r\n\r\nexport { DataContext, DataProvider, useData }\r\n","import * as tf from '@tensorflow/tfjs'\r\nimport { Tensor } from '@tensorflow/tfjs'\r\n\r\nexport default function normalizeTensor(normalizedTensor: Tensor, Min: Tensor, Max: Tensor) {\r\n    return tf.tidy(() => {\r\n        return normalizedTensor.mul(Max.sub(Min)).add(Min)\r\n    })\r\n}\r\n","import { Optimizer, train } from '@tensorflow/tfjs'\r\n\r\nexport type optimizerInfo = {\r\n    name: string\r\n    constructor: (...params: any) => Optimizer\r\n    parameters: {\r\n        name: string\r\n        defaultValue: any\r\n        type: 'number' | 'boolean'\r\n        description?: string\r\n    }[]\r\n    description?: string\r\n}\r\n\r\ntype optimizersList = {\r\n    [key: string]: optimizerInfo\r\n}\r\n\r\n//NOTE: Parameters must be in the same order as in constructor function\r\n\r\nexport const OPTIMIZERS: optimizersList = {\r\n    sgd: {\r\n        name: 'sgd',\r\n        constructor: train.sgd,\r\n        parameters: [\r\n            {\r\n                name: 'learningRate',\r\n                type: 'number',\r\n                defaultValue: 0.001,\r\n                description: 'The learning rate to use for the algorithm. ',\r\n            },\r\n        ],\r\n        description: 'Optimizer that uses stochastic gradient descent',\r\n    },\r\n    momentum: {\r\n        name: 'momentum',\r\n        constructor: train.momentum,\r\n        parameters: [\r\n            {\r\n                name: 'learningRate',\r\n                type: 'number',\r\n                defaultValue: 0.001,\r\n                description: 'The learning rate to use for the algorithm. ',\r\n            },\r\n            {\r\n                name: 'momentum',\r\n                type: 'number',\r\n                defaultValue: 0.001,\r\n                description: 'The momentum to use for the momentum gradient descent algorithm.',\r\n            },\r\n            {\r\n                name: 'useNesterov',\r\n                type: 'boolean',\r\n                defaultValue: false,\r\n            },\r\n        ],\r\n        description: 'Optimizer that uses momentum gradient descent.',\r\n    },\r\n    adam: {\r\n        name: 'adam',\r\n        constructor: train.adam,\r\n        parameters: [\r\n            {\r\n                name: 'learningRate',\r\n                type: 'number',\r\n                defaultValue: 0.001,\r\n            },\r\n            {\r\n                name: 'beta1',\r\n                type: 'number',\r\n                defaultValue: 0.9,\r\n                description: 'The exponential decay rate for the 1st moment estimates',\r\n            },\r\n            {\r\n                name: 'beta2',\r\n                type: 'number',\r\n                defaultValue: 0.999,\r\n                description: 'The exponential decay rate for the 2nd moment estimates',\r\n            },\r\n            {\r\n                name: 'epsilon',\r\n                type: 'number',\r\n                defaultValue: null,\r\n                description: 'A small constant for numerical stability',\r\n            },\r\n        ],\r\n        description: 'Optimizer that uses the Adam algorithm. See https://arxiv.org/abs/1412.6980',\r\n    },\r\n    rmsprop: {\r\n        name: 'rmsprop',\r\n        constructor: train.rmsprop,\r\n        parameters: [\r\n            {\r\n                name: 'learningRate',\r\n                type: 'number',\r\n                defaultValue: 0.001,\r\n            },\r\n            {\r\n                name: 'decay',\r\n                type: 'number',\r\n                defaultValue: 0.9,\r\n                description: 'The discounting factor for the history/coming gradient',\r\n            },\r\n            {\r\n                name: 'momentum',\r\n                type: 'number',\r\n                defaultValue: 0.999,\r\n                description: 'The momentum to use for the RMSProp gradient descent algorithm',\r\n            },\r\n            {\r\n                name: 'epsilon',\r\n                type: 'number',\r\n                defaultValue: null,\r\n                description: 'Small value to avoid zero denominator',\r\n            },\r\n            {\r\n                name: 'centered',\r\n                type: 'boolean',\r\n                defaultValue: false,\r\n                description:\r\n                    'If true, gradients are normalized by the estimated variance of the gradient',\r\n            },\r\n        ],\r\n        description:\r\n            'Constructs a tf.RMSPropOptimizer that uses RMSProp gradient descent. This implementation uses plain momentum and is not centered version of RMSProp.',\r\n    },\r\n    /* adadelta: \r\n    adagrad: \r\n    adamax:  */\r\n}\r\n","import { losses, metrics } from '@tensorflow/tfjs'\r\n\r\nexport const MIN_UNITS = 1\r\nexport const MAX_UNITS = 255\r\n\r\nexport const MAX_LAYERS = 5\r\nexport const MIN_LAYERS = 2\r\n\r\nexport const ACTIVATION_IDENTIFIRES = [\r\n    'linear',\r\n    'relu',\r\n    'elu',\r\n    'hardSigmoid',\r\n    'relu6',\r\n    'selu',\r\n    'sigmoid',\r\n    'softmax',\r\n    'softplus',\r\n    'softsign',\r\n    'tanh',\r\n    'swish',\r\n    'mish',\r\n] as const\r\n\r\nexport const LOSSES_FUNCTIONS = Object.keys(losses) as (keyof typeof losses)[]\r\nexport const METRICS = Object.keys(metrics) as (keyof typeof metrics)[]\r\nexport * from './optimizers'\r\n","import * as tf from '@tensorflow/tfjs'\r\nimport { Tensor } from '@tensorflow/tfjs'\r\n\r\nexport default function normalizeTensor(tensor: Tensor) {\r\n    return tf.tidy(() => {\r\n        const Max = tensor.max()\r\n        const Min = tensor.min()\r\n\r\n        const normalizedTensor = tensor.sub(Min).div(Max.sub(Min))\r\n\r\n        return {\r\n            normalizedTensor,\r\n            Min,\r\n            Max,\r\n        }\r\n    })\r\n}\r\n","import React, {\r\n    createContext,\r\n    ReactNode,\r\n    useCallback,\r\n    useEffect,\r\n    useRef,\r\n    useState,\r\n    useContext,\r\n} from 'react'\r\nimport * as tf from '@tensorflow/tfjs'\r\n\r\nimport unNormalizeTensor from '../util/unNormalizeTensor'\r\n\r\nimport {\r\n    MIN_UNITS,\r\n    MAX_UNITS,\r\n    MAX_LAYERS,\r\n    MIN_LAYERS,\r\n    ACTIVATION_IDENTIFIRES,\r\n    METRICS,\r\n    LOSSES_FUNCTIONS,\r\n    OPTIMIZERS,\r\n    optimizerInfo,\r\n} from '../constants'\r\n\r\nimport { Sequential } from '@tensorflow/tfjs'\r\nimport { useData } from './Data'\r\nimport normalizeTensor from '../util/normalizeTensor'\r\n\r\ntype ActivationIdentifier = typeof ACTIVATION_IDENTIFIRES[number]\r\ntype LossesType = typeof LOSSES_FUNCTIONS[number]\r\ntype MetricType = typeof METRICS[number]\r\n\r\nexport interface ModelSettings {\r\n    layers: {\r\n        name: string\r\n        units: number\r\n        activation?: ActivationIdentifier\r\n        adjustable: boolean\r\n    }[]\r\n    optimizer: optimizerInfo\r\n    optimizerOptions: any\r\n    loss: LossesType\r\n    metric: MetricType\r\n}\r\nexport interface LearningSettings {\r\n    batchSize: number\r\n    epochs: number\r\n    normalize: boolean\r\n}\r\n\r\ntype evaluationResults = {\r\n    evaluation: number[]\r\n    prediction: { [key: string]: number }[]\r\n    error: { [key: string]: number }[]\r\n}\r\n\r\n/**\r\n * @argument currentTrainingLog - object containing metric loss and validation error from current epoch\r\n * @argument currentPrediction - vector with current prediction\r\n */\r\nexport type onEpochEndCallback = (\r\n    currentTrainingLog: {\r\n        metric: { [key: string]: number }\r\n        val: { [key: string]: number }\r\n    },\r\n    currentPrediction: { [key: string]: number }[]\r\n) => void\r\n\r\ntype trainModelFunction = (args: {\r\n    onEpochEndCallback: onEpochEndCallback\r\n    onTrainBeginCallback: () => void\r\n}) => Promise<void>\r\n\r\nconst initialModelSettings: ModelSettings = {\r\n    layers: [\r\n        {\r\n            name: 'Input Layer',\r\n            units: 1,\r\n            activation: 'linear',\r\n            adjustable: false,\r\n        },\r\n        {\r\n            name: 'Hidden Layer 1',\r\n            units: 4,\r\n            activation: 'linear',\r\n            adjustable: true,\r\n        },\r\n        {\r\n            name: 'Output Layer',\r\n            units: 1,\r\n            adjustable: false,\r\n            activation: 'linear',\r\n        },\r\n    ],\r\n    optimizer: OPTIMIZERS.sgd,\r\n    optimizerOptions: {\r\n        learningRate: 0.001,\r\n    },\r\n    loss: 'meanSquaredError',\r\n    metric: 'meanSquaredError',\r\n}\r\n\r\nconst initialLearningSettings: LearningSettings = {\r\n    batchSize: 32,\r\n    epochs: 100,\r\n    normalize: true,\r\n}\r\n\r\nconst TensorflowContext = createContext({\r\n    modelSettings: initialModelSettings,\r\n    learningSettings: initialLearningSettings,\r\n    isCompiled: false,\r\n    isTraining: false,\r\n    trainModel: (async () => {}) as trainModelFunction,\r\n    evaulateData: (): evaluationResults => ({} as evaluationResults),\r\n    compileModel: () => {},\r\n    setLayersUnits: (layerName: string, newValue: number) => {},\r\n    addLayer: () => {},\r\n    removeLayer: () => {},\r\n    setActivationFunction: (layerName: string, newValue: ActivationIdentifier) => {},\r\n    stopTraining: () => {},\r\n    setLearningOption: (option: { [k in keyof LearningSettings]?: LearningSettings[k] }) => {},\r\n    setOptimizer: (newOptimazer: string) => {},\r\n    setOptimizerOption: (key: string, newValue: any) => {},\r\n    setLoss: (newValue: LossesType) => {},\r\n    setMetric: (newValue: MetricType) => {},\r\n})\r\n\r\nfunction TensorflowProvider({ children }: { children: ReactNode }) {\r\n    const { learningData, evaluationData } = useData()\r\n\r\n    const model = useRef<Sequential>(tf.sequential())\r\n\r\n    const [isCompiled, setCompiled] = useState(false)\r\n    const [isTraining, setTraining] = useState(false)\r\n\r\n    // possibly change it to hook\r\n    const [modelSettings, setModelSettings] = useState(initialModelSettings)\r\n    const [learningSettings, setLearningSettings] = useState(initialLearningSettings)\r\n\r\n    // when any setting is change model needs to be compiled again\r\n    useEffect(() => {\r\n        setCompiled(false)\r\n    }, [modelSettings])\r\n\r\n    const setLayersUnits = useCallback((layerName: string, newValue: number) => {\r\n        setModelSettings((state) => {\r\n            const layerToChange = state.layers.find((layer) => layer.name === layerName)!\r\n            if (newValue > MAX_UNITS || newValue < MIN_UNITS) return state\r\n            layerToChange.units = newValue\r\n            return { ...state }\r\n        })\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setLayersUnits('Input Layer', learningData.inputs.keys.length)\r\n        setLayersUnits('Output Layer', learningData.labels.keys.length)\r\n    }, [learningData.inputs.keys.length, learningData.labels.keys.length, setLayersUnits])\r\n\r\n    const addLayer = useCallback(() => {\r\n        setModelSettings((state) => {\r\n            if (state.layers.length >= MAX_LAYERS) return state\r\n            state.layers.splice(-1, 0, {\r\n                name: `Hidden Layer ${state.layers.length - 1}`,\r\n                units: 1,\r\n                activation: 'linear',\r\n                adjustable: true,\r\n            })\r\n            return { ...state }\r\n        })\r\n    }, [])\r\n\r\n    const removeLayer = useCallback(() => {\r\n        setModelSettings((state) => {\r\n            if (state.layers.length <= MIN_LAYERS) return state\r\n            state.layers.splice(-2, 1)\r\n            return { ...state }\r\n        })\r\n    }, [])\r\n\r\n    const setActivationFunction = (layerName: string, newValue: ActivationIdentifier) => {\r\n        setModelSettings((state) => {\r\n            const layerToChange = state.layers.find((layer) => layer.name === layerName)!\r\n            layerToChange.activation = newValue\r\n            return { ...state }\r\n        })\r\n    }\r\n\r\n    const setOptimizer = (newOptimizer: string) => {\r\n        const optimizer = OPTIMIZERS[newOptimizer]\r\n        const optimizerOptions: {\r\n            [k: string]: number | undefined | boolean\r\n        } = Object.fromEntries(\r\n            optimizer.parameters.map(({ name, defaultValue }) => [name, defaultValue])\r\n        )\r\n\r\n        setModelSettings((state) => ({\r\n            ...state,\r\n            optimizer,\r\n            optimizerOptions,\r\n        }))\r\n    }\r\n\r\n    const stopTraining = useCallback(() => {\r\n        model.current.stopTraining = true\r\n        setTraining(false)\r\n    }, [model])\r\n\r\n    const compileModel = useCallback(async () => {\r\n        const { layers, optimizer, optimizerOptions, loss, metric } = modelSettings\r\n\r\n        if (isTraining) stopTraining()\r\n\r\n        model.current = tf.sequential({\r\n            layers: layers.map(({ units, activation }, index) =>\r\n                tf.layers.dense({\r\n                    inputShape: index === 0 ? [units] : undefined,\r\n                    units,\r\n                    activation,\r\n                    /*  useBias: false, */\r\n                })\r\n            ),\r\n        })\r\n\r\n        model.current.compile({\r\n            optimizer: optimizer.constructor(...Object.values(optimizerOptions)),\r\n            loss: tf.losses[loss] as any,\r\n            metrics: tf.metrics[metric],\r\n        })\r\n\r\n        setCompiled(true)\r\n        console.log('%cModel compiled succesfully', 'font-weight: bold; font-size: 16px;')\r\n        model.current.summary()\r\n    }, [isTraining, modelSettings, stopTraining])\r\n\r\n    /**\r\n     * handles the normalization (if active), then calls a model.fit() with input and output specyfied in arguments\r\n     * calls onEpochEndsCallback on every epoch end to enable actualizing logs\r\n     */\r\n    const trainModel: trainModelFunction = useCallback(\r\n        async ({ onEpochEndCallback, onTrainBeginCallback }) => {\r\n            const { epochs, batchSize, normalize } = learningSettings\r\n\r\n            //TODO: clean up normalization\r\n\r\n            let learningInput = learningData.inputs.asTensor,\r\n                learningLabels = learningData.labels.asTensor,\r\n                labelMin: tf.Tensor,\r\n                labelMax: tf.Tensor,\r\n                inputMin: tf.Tensor,\r\n                inputMax: tf.Tensor\r\n\r\n            const inputKeys = learningData.inputs.keys\r\n            const labelKeys = learningData.labels.keys\r\n\r\n            if (normalize) {\r\n                const input = normalizeTensor(learningInput)\r\n                learningInput = input.normalizedTensor\r\n                inputMin = input.Min\r\n                inputMax = input.Max\r\n\r\n                const label = normalizeTensor(learningLabels)\r\n                learningLabels = label.normalizedTensor\r\n                labelMin = label.Min\r\n                labelMax = label.Max\r\n            }\r\n\r\n            learningInput.print()\r\n            learningLabels.print()\r\n\r\n            const GRAIN_LEVEL = 20\r\n            const MAX_TEST = learningInput.max().arraySync() as number\r\n            const MIN_TEST = learningInput.min().arraySync() as number\r\n\r\n            learningInput.min().print()\r\n\r\n            const testVector = tf\r\n                .tensor(\r\n                    inputKeys.map((k) => tf.linspace(MAX_TEST, MIN_TEST, GRAIN_LEVEL).arraySync())\r\n                )\r\n                .reshape([-1, inputKeys.length])\r\n\r\n            setTraining(true)\r\n            try {\r\n                await model.current.fit(\r\n                    learningInput.reshape([-1, inputKeys.length]),\r\n                    learningLabels.reshape([-1, labelKeys.length]),\r\n                    {\r\n                        batchSize,\r\n                        epochs,\r\n                        shuffle: true,\r\n                        validationSplit: 0.2,\r\n                        yieldEvery: 50,\r\n                        callbacks: {\r\n                            onTrainBegin: onTrainBeginCallback,\r\n                            onEpochEnd: async (epoch, logs) => {\r\n                                // object containing metric loss and validation loss for current epoch\r\n\r\n                                // because tensorflow uses hashed names for metrics like 'mse' => 'Hf' , so we have to find that name\r\n                                const currentMetricName = logs\r\n                                    ? Object.keys(logs).find(\r\n                                          (name) => !name.includes('loss') && !name.includes('val')\r\n                                      )\r\n                                    : 'loss'\r\n\r\n                                const currentTrainingLog = {\r\n                                    metric: { x: epoch, y: logs ? logs[`${currentMetricName}`] : 0 },\r\n                                    val: {\r\n                                        x: epoch,\r\n                                        y: logs ? logs[`val_${currentMetricName}`] : 0,\r\n                                    },\r\n                                }\r\n\r\n                               /*  console.log(logs) */\r\n                                let predictedTensor = model.current.predict(testVector) as tf.Tensor\r\n\r\n                                if (normalize)\r\n                                    predictedTensor = unNormalizeTensor(\r\n                                        predictedTensor,\r\n                                        labelMin,\r\n                                        labelMax\r\n                                    )\r\n                                const predictedArray = predictedTensor.arraySync() as number[][]\r\n\r\n                                const testArray = normalize\r\n                                    ? (unNormalizeTensor(\r\n                                          testVector,\r\n                                          inputMin,\r\n                                          inputMax\r\n                                      ).arraySync() as number[][])\r\n                                    : (testVector.arraySync() as number[][])\r\n\r\n                                // [[x, y],[x,y]],[[z],[z]] => [{x,y,z},{x,y,z}]\r\n                                const currentPrediction = predictedArray.map((y, j) =>\r\n                                    Object.fromEntries([\r\n                                        ...labelKeys.map((key, i) => [key, y[i]]),\r\n                                        ...inputKeys.map((key, i) => [key, testArray[j][i]]),\r\n                                    ])\r\n                                )\r\n\r\n                               /*  console.log(currentPrediction) */\r\n\r\n                                onEpochEndCallback(currentTrainingLog, currentPrediction)\r\n                                /* console.log(logs) */\r\n                                // when fullfilling the training goal\r\n                                /* if (trainingGoal) {\r\n                        model.stopTraining = true\r\n                    } */\r\n                            },\r\n                        },\r\n                    }\r\n                )\r\n            } catch (e) {\r\n                throw e\r\n            } finally {\r\n                setTraining(false)\r\n            }\r\n        },\r\n        [learningData, learningSettings, modelSettings.metric]\r\n    )\r\n\r\n    const evaulateData = useCallback(() => {\r\n        const { inputs, labels } = evaluationData\r\n        const { normalize } = learningSettings\r\n\r\n        // handle normalization\r\n        let learningInput = inputs.asTensor,\r\n            learningLabels = labels.asTensor,\r\n            labelMin: tf.Tensor,\r\n            labelMax: tf.Tensor,\r\n            inputMin: tf.Tensor,\r\n            inputMax: tf.Tensor\r\n\r\n        if (normalize) {\r\n            const input = normalizeTensor(learningInput)\r\n            learningInput = input.normalizedTensor\r\n            inputMin = input.Min\r\n            inputMax = input.Max\r\n\r\n            const label = normalizeTensor(learningLabels)\r\n            learningLabels = label.normalizedTensor\r\n            labelMin = label.Min\r\n            labelMax = label.Max\r\n        }\r\n\r\n        // 1.evaulate ( get total loss and metric )\r\n\r\n        const testInput = learningInput.reshape([-1, inputs.keys.length])\r\n        const testLabels = learningLabels.reshape([-1, labels.keys.length])\r\n\r\n        const evaluation = (model.current.evaluate(testInput, testLabels) as tf.Scalar[]).map(\r\n            (tensor) => tensor.arraySync()\r\n        )\r\n\r\n        // 2.get final prediction\r\n\r\n        let finalPrediction = model.current.predict(testInput) as tf.Tensor\r\n\r\n        let errorTensor = finalPrediction.sub(testLabels)\r\n\r\n        if (normalize) finalPrediction = unNormalizeTensor(finalPrediction, labelMin!, labelMax!)\r\n        if (normalize) errorTensor = unNormalizeTensor(errorTensor, labelMin!, labelMax!)\r\n\r\n        const testArray = normalize\r\n            ? (unNormalizeTensor(testInput, inputMin!, inputMax!).arraySync() as number[][])\r\n            : (testInput.arraySync() as number[][])\r\n\r\n        // [[x, y],[x,y]],[[z],[z]] => [{x,y,z},{x,y,z}]\r\n        const prediction = (finalPrediction.arraySync() as number[][]).map((y, j) =>\r\n            Object.fromEntries([\r\n                ...labels.keys.map((key, i) => [key, y[i]]),\r\n                ...inputs.keys.map((key, i) => [key, testArray[j][i]]),\r\n            ])\r\n        )\r\n        const error = (errorTensor.arraySync() as number[][]).map((y, j) =>\r\n            Object.fromEntries([\r\n                ...labels.keys.map((key, i) => [key, y[i]]),\r\n                ...inputs.keys.map((key, i) => [key, testArray[j][i]]),\r\n            ])\r\n        )\r\n\r\n        return { evaluation, prediction, error }\r\n    }, [evaluationData, learningSettings])\r\n\r\n    const setLearningOption = (\r\n        options: { [k in keyof LearningSettings]?: LearningSettings[k] }\r\n    ) => {\r\n        setLearningSettings((prev) => ({ ...prev, ...options }))\r\n    }\r\n\r\n    const setOptimizerOption = (key: any, newValue: any) => {\r\n        if (isNaN(newValue)) newValue = undefined\r\n\r\n        setModelSettings((prev) => {\r\n            const newState = {\r\n                ...prev,\r\n                optimizerOptions: { ...prev.optimizerOptions, [key]: newValue },\r\n            }\r\n            console.log(newState)\r\n            return newState\r\n        })\r\n    }\r\n\r\n    const setLoss = (newValue: LossesType) => {\r\n        setModelSettings((prev) => {\r\n            return { ...prev, loss: newValue }\r\n        })\r\n    }\r\n    const setMetric = (newValue: MetricType) => {\r\n        setModelSettings((prev) => {\r\n            return { ...prev, metric: newValue }\r\n        })\r\n    }\r\n    // move logs into new context and use useState for context\r\n\r\n    return (\r\n        <TensorflowContext.Provider\r\n            value={{\r\n                modelSettings,\r\n                learningSettings,\r\n                isCompiled,\r\n                isTraining,\r\n                trainModel,\r\n                evaulateData,\r\n                compileModel,\r\n                setLayersUnits,\r\n                addLayer,\r\n                removeLayer,\r\n                setActivationFunction,\r\n                stopTraining,\r\n                setLearningOption,\r\n                setOptimizer,\r\n                setOptimizerOption,\r\n                setLoss,\r\n                setMetric,\r\n            }}\r\n        >\r\n            {children}\r\n        </TensorflowContext.Provider>\r\n    )\r\n}\r\n\r\nconst useTensorflow = () => useContext(TensorflowContext)\r\n\r\nexport { TensorflowContext, TensorflowProvider, useTensorflow }\r\n","import { createGlobalStyle } from 'styled-components'\r\n\r\n/* variables are rewritten from the MaterialUI theme */\r\n\r\nexport const GlobalStyles = createGlobalStyle`\r\n\r\n    * {\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    * :focus {\r\n            outline: none;\r\n    }\r\n\r\n    html {\r\n        /* CSS variables */\r\n        --background-color: ${(props) => props.theme.palette.background.default};\r\n        --secondary-font-color: ${(props) => props.theme.palette.text.secondary};\r\n        --font-color:${(props) => props.theme.palette.text.primary};\r\n        --primary-color: ${(props) => props.theme.palette.primary.main};\r\n        --primary-color-light: ${(props) => props.theme.palette.primary.light};\r\n        --primary-color-contrastText: ${(props) => props.theme.palette.primary.contrastText};\r\n    }\r\n\r\n    body {\r\n        margin: 0;\r\n        font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", \"Roboto\", \"Oxygen\", \"Ubuntu\", \"Cantarell\", \"Fira Sans\",\r\n            \"Droid Sans\", \"Helvetica Neue\", sans-serif;\r\n        -webkit-font-smoothing: antialiased;\r\n        -moz-osx-font-smoothing: grayscale;\r\n\r\n        background-color: var(--background-color);\r\n        color: var(--font-color);\r\n        font-size: 16px;\r\n    }\r\n\r\n    code {\r\n        font-family: source-code-pro, Menlo, Monaco, Consolas, \"Courier New\", monospace;\r\n    }\r\n\r\n    h1,\r\n    h2,\r\n    h3,\r\n    h4,\r\n    p {\r\n        margin: 0;\r\n    }\r\n\r\n    a {\r\n        text-decoration: none;\r\n        cursor: pointer;\r\n        color: inherit;\r\n        display: inline-block;\r\n        margin: 0;\r\n    }\r\n\r\n    button {\r\n        border: none;\r\n        outline: none;\r\n    }\r\n\r\n    button:active {\r\n        outline: none;\r\n        border: none;\r\n    }\r\n\r\n    input {\r\n        border: none;\r\n        outline: none;\r\n    }\r\n\r\n`\r\n","import { createMuiTheme } from '@material-ui/core/styles'\r\n\r\nexport const theme = createMuiTheme({\r\n    palette: {\r\n        text: {\r\n            secondary: 'rgba(83, 83, 83, 0.88)',\r\n        },\r\n    },\r\n    overrides: {\r\n        MuiFormControl: {\r\n            root: {\r\n                margin: '0.5em',\r\n            },\r\n        },\r\n    },\r\n})\r\n","import styled from 'styled-components'\r\nimport { Card } from '@material-ui/core'\r\nimport { MAX_DESKTOP } from '../styles'\r\n\r\nconst StyledCard = styled(Card)`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    padding: 1em;\r\n    margin: 0.4em;\r\n    width: 100%;\r\n\r\n    max-width: 640px;\r\n    position: relative;\r\n\r\n    @media (min-width: ${MAX_DESKTOP}px) {\r\n        max-width: 800px;\r\n    }\r\n`\r\n\r\nexport const StyledCardHeader = styled.header`\r\n    display: flex;\r\n    justify-content: space-between;\r\n    width: 100%;\r\n`\r\n\r\nStyledCard.Header = StyledCardHeader\r\n\r\nexport default StyledCard\r\n","export const MAX_MOBILE = 640\r\nexport const MAX_TABLET = 1100\r\nexport const MAX_LAPTOP = 1500\r\nexport const MAX_DESKTOP = 2400\r\n","import styled, { StyledComponent } from 'styled-components'\r\nimport { MAX_LAPTOP, MAX_TABLET } from '../styles'\r\n\r\n/**\r\n * layout flex container\r\n */\r\nconst Container = styled.div`\r\n    display: grid;\r\n\r\n    grid-template-columns: repeat(3, 33%);\r\n    grid-template-areas: 'model training evaulation';\r\n\r\n    align-items: stretch;\r\n    justify-items: stretch;\r\n\r\n    width: 100%;\r\n    min-height: 100vh;\r\n    padding: 1em;\r\n\r\n    @media (max-width: ${MAX_LAPTOP}px) {\r\n        grid-template-areas:\r\n            'model training'\r\n            'model evaulation';\r\n        grid-template-columns: repeat(2, 50%);\r\n    }\r\n    @media (max-width: ${MAX_TABLET}px) {\r\n        grid-template-areas:\r\n            'model'\r\n            'training'\r\n            'evaulation';\r\n        grid-template-columns: repeat(1, 100%);\r\n    }\r\n`\r\n\r\nconst Column: StyledComponent<'div', any, {}, never> & {\r\n    Header?: StyledComponent<'h1', any, {}, never>\r\n} = styled.div<{ gridName: string }>`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    /* flex-grow: 1; */\r\n    /* max-width: 700px; */\r\n    padding: 0.4em;\r\n    grid-area: ${(props) => props.gridName};\r\n`\r\n\r\nconst Row = styled.div`\r\n    display: flex;\r\n    flex-direction: row;\r\n    align-items: end;\r\n    justify-content: space-evenly;\r\n\r\n    margin: 0.5em;\r\n    width: 100%;\r\n`\r\n\r\nColumn.Header = styled.h1`\r\n    display: block;\r\n    width: 100%;\r\n`\r\n\r\nexport { Container, Column, Row }\r\n","import React, { ChangeEventHandler, useEffect, useRef } from 'react'\r\nimport styled from 'styled-components'\r\nimport { IconButton } from '@material-ui/core'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport RemoveIcon from '@material-ui/icons/Remove'\r\n\r\ninterface CounterControlProps {\r\n    setCounter: (newValue: number) => void\r\n    count: number\r\n    step?: number\r\n    min?: number\r\n    max?: number\r\n    styles?: object\r\n}\r\n\r\nexport default function CounterControl({\r\n    setCounter,\r\n    step = 1,\r\n    count,\r\n    min,\r\n    max,\r\n    styles,\r\n    ...props\r\n}: CounterControlProps) {\r\n    const inputRef = useRef<HTMLInputElement>()\r\n\r\n    const increment = () => {\r\n        setCounter(count + step)\r\n    }\r\n    const decrement = () => {\r\n        setCounter(count - step)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (inputRef?.current) inputRef.current.value = count.toString()\r\n    }, [count])\r\n\r\n    const handleChange: ChangeEventHandler<HTMLInputElement> = (e) => {\r\n        const newValue = e.target.valueAsNumber\r\n        if (newValue) setCounter(e.target.valueAsNumber)\r\n    }\r\n\r\n    return (\r\n        <div style={{ display: 'flex', ...styles }}>\r\n            <IconButton onClick={increment} size=\"small\" disabled={max ? count >= max : false}>\r\n                <AddIcon fontSize=\"inherit\" />\r\n            </IconButton>\r\n\r\n            <StyledInput\r\n                ref={inputRef as React.RefObject<HTMLInputElement>}\r\n                type=\"number\"\r\n                onInput={handleChange}\r\n                size={0}\r\n                style={{ margin: '0 .3em' }}\r\n            />\r\n\r\n            <IconButton onClick={decrement} size=\"small\" disabled={min ? count <= min : false}>\r\n                <RemoveIcon fontSize=\"inherit\" />\r\n            </IconButton>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst StyledInput = styled.input`\r\n    display: flex;\r\n    width: 3em;\r\n    &::-webkit-inner-spin-button,\r\n    &::-webkit-inner-spin-button {\r\n        -webkit-appearance: none;\r\n    }\r\n    appearance: textfield;\r\n`\r\n","import styled from 'styled-components'\r\nimport { Card, Button, Select, MenuItem } from '@material-ui/core'\r\nimport AddBoxIcon from '@material-ui/icons/AddBox'\r\nimport RemoveCircleIcon from '@material-ui/icons/RemoveCircle'\r\nimport CounterControl from '../components/CounterControl'\r\nimport { useTensorflow } from '../context/Tensorflow'\r\n\r\nimport { MIN_UNITS, MAX_UNITS, MAX_LAYERS, MIN_LAYERS, ACTIVATION_IDENTIFIRES } from '../constants'\r\n\r\nexport default function LayersControls() {\r\n    const {\r\n        modelSettings: { layers },\r\n        setLayersUnits,\r\n        addLayer,\r\n        setActivationFunction,\r\n        removeLayer,\r\n    } = useTensorflow()\r\n\r\n    const LayersControls = layers.map((layer, i) => (\r\n        <LayerControl key={i}>\r\n            <div style={{ marginRight: 'auto' }}>{layer.name}</div>\r\n            <Select\r\n                labelId={`${layer.name} activation function`}\r\n                value={layer.activation}\r\n                onChange={(e) => setActivationFunction(layer.name, e.target.value)}\r\n            >\r\n                {ACTIVATION_IDENTIFIRES.map((func) => (\r\n                    <MenuItem value={func} key={func}>\r\n                        {func}\r\n                    </MenuItem>\r\n                ))}\r\n            </Select>\r\n            {layer.adjustable && (\r\n                <CounterControl\r\n                    count={layer.units}\r\n                    setCounter={(value) => setLayersUnits(layer.name, value)}\r\n                    max={MAX_UNITS}\r\n                    min={MIN_UNITS}\r\n                />\r\n            )}\r\n        </LayerControl>\r\n    ))\r\n\r\n    return (\r\n        <Container>\r\n            <Title>Layers: </Title>\r\n            {LayersControls.slice(0, -1)}\r\n            <div style={{ display: 'flex', justifyContent: 'space-evenly' }}>\r\n                <Button\r\n                    startIcon={<AddBoxIcon />}\r\n                    onClick={addLayer}\r\n                    disabled={layers.length >= MAX_LAYERS}\r\n                >\r\n                    Add Layer\r\n                </Button>\r\n                <Button\r\n                    startIcon={<RemoveCircleIcon />}\r\n                    onClick={removeLayer}\r\n                    disabled={layers.length <= MIN_LAYERS}\r\n                >\r\n                    Remove Layer\r\n                </Button>\r\n            </div>\r\n\r\n            {LayersControls.slice(-1)}\r\n        </Container>\r\n    )\r\n}\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    flex-direction: column;\r\n    align-items: center;\r\n\r\n    margin-bottom: 2em;\r\n`\r\n\r\nconst Title = styled.h3`\r\n    color: var(--secondary-font-color);\r\n    display: block;\r\n    width: 100%;\r\n`\r\n\r\nconst LayerControl = styled(Card)`\r\n    display: flex;\r\n    align-items: center;\r\n    width: 100%;\r\n    margin: 0.3em;\r\n    padding: 0.3em;\r\n    border-radius: 100px;\r\n`\r\n","import styled from 'styled-components'\r\n\r\nconst WIDTH = 300\r\nconst HEIGHT = 200\r\n\r\ninterface NetworkDiagramProps {\r\n    layers: [number]\r\n    color?: string\r\n}\r\n\r\ntype Point = {\r\n    x: number\r\n    y: number\r\n}\r\n\r\n/**\r\n * Component to visualize structure of a neural network\r\n * prop layers is an array of numbers where every number represents number of nodes in the leyer\r\n * @example layers = [1,2,1]\r\n */\r\nexport default function NetworkDiagram({ layers, color, ...props }: NetworkDiagramProps) {\r\n    const nodes: Point[][] = layers.map((numberOfNodes, j) => {\r\n        const step_x = WIDTH / (layers.length + 1)\r\n        return new Array(numberOfNodes).fill(0).map((zero, i) => {\r\n            const step_y = HEIGHT / (numberOfNodes + 1)\r\n            return { y: step_y * (i + 1), x: step_x * (j + 1) }\r\n        })\r\n    })\r\n\r\n    const lines: { start: Point; end: Point }[] = nodes\r\n        .map((node, i) => {\r\n            if (i === 0) return []\r\n            const current = node\r\n            const prev = nodes[i - 1]\r\n            let lines: { start: Point; end: Point }[] = []\r\n            current.forEach(({ x: x1, y: y1 }) => {\r\n                prev.forEach(({ x: x2, y: y2 }) => {\r\n                    lines.push({\r\n                        start: { x: x1, y: y1 },\r\n                        end: { x: x2, y: y2 },\r\n                    })\r\n                })\r\n            })\r\n            return lines\r\n        })\r\n        .reduce((prev, curr) => (prev ? [...prev, ...curr] : curr), [])\r\n\r\n    return (\r\n        <Container {...props}>\r\n            <svg style={{ width: '100%', height: '100%', position: 'absolute', zIndex: 0 }}>\r\n                {lines.map(({ start: { x: x1, y: y1 }, end: { x: x2, y: y2 } }, i) => (\r\n                    <Line x1={x1} y1={y1} x2={x2} y2={y2} key={i} />\r\n                ))}\r\n            </svg>\r\n            {nodes\r\n                .reduce((prev, curr) => [...prev, ...curr], [])\r\n                .map(({ x, y }, i) => (\r\n                    <Circle color={color} style={{ top: y + 'px', left: x + 'px' }} key={i} />\r\n                ))}\r\n        </Container>\r\n    )\r\n}\r\n\r\nconst Container = styled.div`\r\n    position: relative;\r\n    display: flex;\r\n    justify-content: space-evenly;\r\n    align-items: center;\r\n    width: ${WIDTH}px;\r\n    height: ${HEIGHT}px;\r\n`\r\n\r\nconst Circle = styled.div`\r\n    display: block;\r\n    position: absolute;\r\n    width: 30px;\r\n    height: 30px;\r\n    border-radius: 50%;\r\n    background-color: ${(props) => props.color};\r\n    box-shadow: rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px;\r\n\r\n    transform: translate(-50%, -50%);\r\n`\r\n\r\nconst Line = styled.line`\r\n    stroke: var(--secondary-font-color);\r\n    stroke-width: 3px;\r\n    opacity: 0.6;\r\n`\r\n","import styled from 'styled-components'\r\nimport { Row } from '../components/Layout'\r\nimport { Select, MenuItem, Input, InputLabel, FormControl } from '@material-ui/core'\r\nimport { useTensorflow } from '../context/Tensorflow'\r\nimport { LOSSES_FUNCTIONS, METRICS } from '../constants'\r\n\r\nimport { OPTIMIZERS } from '../constants/optimizers'\r\n\r\nexport default function ModelOptions() {\r\n    const {\r\n        modelSettings: { optimizer, optimizerOptions, loss, metric },\r\n        setOptimizer,\r\n        setOptimizerOption,\r\n        setLoss,\r\n        setMetric,\r\n    } = useTensorflow()\r\n\r\n    return (\r\n        <Container>\r\n            <Row>\r\n                <FormControl style={{ width: '100%' }}>\r\n                    <InputLabel id=\"Learning-algorithm-label\">Learning Algoritm</InputLabel>\r\n                    <Select\r\n                        labelId={'Learning-algorithm-label'}\r\n                        value={optimizer.name}\r\n                        onChange={(e) => {\r\n                            setOptimizer(e.target.value)\r\n                        }}\r\n                    >\r\n                        {Object.keys(OPTIMIZERS).map((method) => (\r\n                            <MenuItem value={method} key={method}>\r\n                                {method}\r\n                            </MenuItem>\r\n                        ))}\r\n                    </Select>\r\n                </FormControl>\r\n            </Row>\r\n            <Row style={{ flexWrap: 'wrap', justifyContent: 'start' }}>\r\n                {optimizer.parameters.map(({ name, type }) => (\r\n                    <FormControl key={name} style={{ maxWidth: '50%' }}>\r\n                        <InputLabel id={name}>{name}</InputLabel>\r\n                        {type === 'number' && (\r\n                            <Input\r\n                                key={name}\r\n                                type=\"number\"\r\n                                value={optimizerOptions[name]}\r\n                                onInput={(e) => {\r\n                                    setOptimizerOption(name, e.target.valueAsNumber)\r\n                                }}\r\n                            />\r\n                        )}\r\n                        {type === 'boolean' && (\r\n                            <Select\r\n                                value={optimizerOptions[name]}\r\n                                key={name}\r\n                                labelId={name}\r\n                                onChange={(e) => {\r\n                                    setOptimizerOption(name, e.target.value)\r\n                                }}\r\n                            >\r\n                                <MenuItem value={true}>True</MenuItem>\r\n                                <MenuItem value={false}>False</MenuItem>\r\n                            </Select>\r\n                        )}\r\n                    </FormControl>\r\n                ))}\r\n            </Row>\r\n            <Row>\r\n                <FormControl>\r\n                    <InputLabel id={'Metric'}>{'Metric'}</InputLabel>\r\n                    <Select\r\n                        id=\"Metric\"\r\n                        label=\"Metric\"\r\n                        value={metric}\r\n                        onChange={(e) => {\r\n                            setMetric(e.target.value)\r\n                        }}\r\n                    >\r\n                        {METRICS.map((value) => (\r\n                            <MenuItem value={value} key={value}>\r\n                                {value}\r\n                            </MenuItem>\r\n                        ))}\r\n                    </Select>\r\n                </FormControl>\r\n                <FormControl>\r\n                    <InputLabel id={'Loss'}>{'Loss'}</InputLabel>\r\n                    <Select\r\n                        id=\"Loss\"\r\n                        label=\"Loss\"\r\n                        value={loss}\r\n                        onChange={(e) => {\r\n                            setLoss(e.target.value)\r\n                        }}\r\n                    >\r\n                        {LOSSES_FUNCTIONS.map((value) => (\r\n                            <MenuItem value={value} key={value}>\r\n                                {value}\r\n                            </MenuItem>\r\n                        ))}\r\n                    </Select>\r\n                </FormControl>\r\n            </Row>\r\n        </Container>\r\n    )\r\n}\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n    width: 100%;\r\n    flex-direction: column;\r\n    align-items: center;\r\n`\r\n","/* import jBinary from 'jbinary'\r\nimport MAT from './jMatFile' */\r\n\r\nimport Papa, { ParseResult } from 'papaparse'\r\n\r\n/* const toBase64 = (file: File) =>\r\n    new Promise((resolve, reject) => {\r\n        const reader = new FileReader()\r\n        reader.readAsDataURL(file)\r\n        reader.onload = () => resolve(reader.result)\r\n        reader.onerror = (error) => reject(error)\r\n    }) */\r\n\r\nexport const getDataFromMatFile = async (file: File) => {\r\n    /* const file64 = await toBase64(file)\r\n    var jb = new jBinary(file64, MAT)\r\n    const mat = jb.read('mat')\r\n    console.log(mat) */\r\n    /* fs.readFile(path, (err, data) => {\r\n        const jb = new jBinary(data, MAT)\r\n        const mat = jb.read('mat')\r\n        console.log(mat)\r\n    }) */\r\n    /* const file64 = await toBase64(file)\r\n\r\n    jBinary.load(file64, MAT).then((binary) => {\r\n        console.log(binary.readAll())\r\n    }) */\r\n}\r\n\r\n/* const transposeMatrix = (matrix: number[][]) => {\r\n    return matrix.reduce(\r\n        (result, row) => {\r\n            row.forEach((element, i) => {\r\n                if (isNaN(element)) return\r\n                if (!result[i]) result.push([])\r\n                result[i].push(element)\r\n            })\r\n            return result\r\n        },\r\n        [[]] as number[][]\r\n    )\r\n} */\r\n\r\nexport const getDataFromCSVFile: (\r\n    file: File | string\r\n) => Promise<{ data: { [key: string]: string | number }[]; fields?: string[] }> = async (file) => {\r\n    return new Promise((res, rej) => {\r\n        Papa.parse(file, {\r\n            complete: ({\r\n                data,\r\n                errors,\r\n                meta: { fields },\r\n            }: ParseResult<{ [key: string]: string | number }>) => {\r\n                if (errors.length) {\r\n                    console.log(errors)\r\n                    rej(errors)\r\n                } else res({ data, fields })\r\n            },\r\n            /*  transform: (value) => (!isNaN(parseFloat(value)) ? parseFloat(value) : value), */\r\n            header: true,\r\n            skipEmptyLines: true,\r\n            dynamicTyping: true,\r\n            transformHeader: (header: string, index: number) =>\r\n                isNaN(parseFloat(header)) ? header : index?.toString(),\r\n        })\r\n    })\r\n}\r\n","import React, { useState, useEffect, forwardRef, CSSProperties, ChangeEvent } from 'react'\r\nimport styled from 'styled-components/macro'\r\n\r\ninterface FileInputProps {\r\n    name: string\r\n    helperText?: string\r\n    style?: CSSProperties\r\n    onChange?: (e: ChangeEvent<HTMLInputElement>) => void\r\n}\r\n\r\nconst FileInput = forwardRef(\r\n    (\r\n        { name, helperText, style, onChange, ...props }: FileInputProps,\r\n        ref: React.ForwardedRef<HTMLInputElement>\r\n    ) => {\r\n        const [fileInputVisibility, setFileInputVis] = useState(false)\r\n        const [fileInputHover, setFileInputHover] = useState(false)\r\n\r\n        const handleBodyDrag = (e: DragEvent) => {\r\n            if (e.type === 'dragenter') setFileInputVis(true)\r\n            if (e.type === 'dragleave' && !e.relatedTarget) setFileInputVis(false)\r\n            if (e.type === 'drop') setFileInputVis(false)\r\n        }\r\n\r\n        useEffect(() => {\r\n            document.addEventListener('dragleave', handleBodyDrag)\r\n            document.addEventListener('dragenter', handleBodyDrag)\r\n            document.addEventListener('drop', handleBodyDrag)\r\n\r\n            return () => {\r\n                document.removeEventListener('dragenter', handleBodyDrag)\r\n                document.removeEventListener('dragleave', handleBodyDrag)\r\n                document.removeEventListener('drop', handleBodyDrag)\r\n            }\r\n        }, [])\r\n\r\n        return (\r\n            <>\r\n                <StyledInput\r\n                    {...props}\r\n                    ref={ref}\r\n                    $visibility={fileInputVisibility}\r\n                    name={name}\r\n                    id=\"file\"\r\n                    type=\"file\"\r\n                    accept=\".mat, .csv\"\r\n                    onChange={onChange}\r\n                    onDragEnter={() => {\r\n                        setFileInputHover(true)\r\n                    }}\r\n                    onDragLeave={() => {\r\n                        setFileInputHover(false)\r\n                    }}\r\n                />\r\n                <Label $visibility={fileInputVisibility} hover={fileInputHover} htmlFor={name}>\r\n                    {helperText}\r\n                </Label>\r\n            </>\r\n        )\r\n    }\r\n)\r\n\r\nexport default FileInput\r\n\r\nexport const FileInputWrapper = styled.div`\r\n    position: relative;\r\n`\r\n\r\nconst StyledInput = styled.input<{\r\n    readonly $visibility: boolean\r\n}>`\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    opacity: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    z-index: ${(props) => (props.$visibility ? '1' : '-1')};\r\n`\r\n\r\nconst Label = styled.label<{\r\n    readonly $visibility: boolean\r\n    readonly hover: boolean\r\n}>`\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 2;\r\n    opacity: ${(props) => (props.$visibility ? '1' : '0')};\r\n    font-weight: bold;\r\n    border-radius: 0.5em;\r\n    pointer-events: none;\r\n\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    transition: color 0.3s, background-color 0.3s, opacity 0.3s;\r\n    color: var(--primary-color-contrastText);\r\n    background-color: ${(props) =>\r\n        props.hover ? 'var(--primary-color-light)' : ' var(--primary-color);'};\r\n`\r\n","import React, { useRef, useState, ChangeEvent } from 'react'\r\nimport { getDataFromCSVFile } from '../../util/dataConverter'\r\nimport { Button } from '@material-ui/core'\r\nimport FileInput from '../../components/FileInput'\r\n\r\nimport { dataSubFormProps } from './DataForm'\r\n\r\nexport default function DataFromDiskForm({ setData, setFields }: dataSubFormProps) {\r\n    const inputRef = useRef<HTMLInputElement>(null)\r\n\r\n    const [fileName, setFileName] = useState<string>()\r\n\r\n    const handleUpload = async (e: ChangeEvent<HTMLInputElement>) => {\r\n        const file = e.target.files?.item(0)\r\n        if (file) {\r\n            setFileName(file?.name)\r\n            const { data, fields } = await getDataFromCSVFile(file)\r\n            setFields(fields)\r\n            setData(data)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <FileInput\r\n                name={'training Data'}\r\n                helperText=\"drop data here\"\r\n                ref={inputRef}\r\n                onChange={handleUpload}\r\n            />\r\n            <Button\r\n                variant=\"contained\"\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                onClick={() => {\r\n                    inputRef.current?.click()\r\n                }}\r\n            >\r\n                Load from disk\r\n            </Button>\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport { dataSubFormProps } from './DataForm'\r\nimport { Row } from '../../components/Layout'\r\nimport { Button } from '@material-ui/core'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nimport { getDataFromCSVFile } from '../../util/dataConverter'\r\n\r\nconst getDataType = (url: string) => {\r\n    return url.split('.').reverse()[0]\r\n}\r\n\r\nexport default function DataFromURLForm({ setFields, setData }: dataSubFormProps) {\r\n    const [URL, setURL] = useState('https://storage.googleapis.com/tfjs-tutorials/carsData.json')\r\n\r\n    const handleClick = async () => {\r\n        const res = await fetch(URL, {})\r\n        const type = getDataType(URL)\r\n        if (type === 'json') {\r\n            const data = await res.json()\r\n            const fields = Object.keys(data[0])\r\n            setFields(fields)\r\n            setData(data)\r\n        }\r\n        if (type === 'csv') {\r\n            const { data, fields } = await getDataFromCSVFile(await res.text())\r\n            setFields(fields)\r\n            setData(data)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Row style={{ alignItems: 'center', justifyContent: 'center' }}>\r\n            <TextField\r\n                id=\"URL-Fetch\"\r\n                label=\"URL\"\r\n                type=\"search\"\r\n                variant=\"outlined\"\r\n                margin=\"dense\"\r\n                fullWidth\r\n                value={URL}\r\n                onChange={(e) => setURL(e.target.value)}\r\n            />\r\n            <Button onClick={handleClick}>Load</Button>\r\n        </Row>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport { Row, Column } from '../../components/Layout'\r\nimport { IconButton, IconButtonProps, MenuItem, useTheme } from '@material-ui/core'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport { DataObject } from '../../context/Data'\r\nimport { useEffect } from 'react'\r\n\r\nexport default function ChooseInputOutput({\r\n    fields,\r\n    data,\r\n    dataContext,\r\n}: {\r\n    fields: string[]\r\n    data: { [key: string]: any }[]\r\n    dataContext: DataObject\r\n}) {\r\n    const [labels, setLabels] = useState<string[]>(\r\n        dataContext.inputs.keys.length ? dataContext.inputs.keys : ['']\r\n    )\r\n    const [inputs, setInputs] = useState<string[]>(\r\n        dataContext.labels.keys.length ? dataContext.labels.keys : ['']\r\n    )\r\n\r\n    useEffect(() => {\r\n        const inputToRemove = dataContext.inputs.keys.find((key) => !inputs.includes(key))\r\n        const labelToRemove = dataContext.labels.keys.find((key) => !labels.includes(key))\r\n\r\n        dataContext.removeInput(inputToRemove)\r\n        dataContext.removeLabel(labelToRemove)\r\n\r\n        const inputToAdd = inputs.find((key) => !dataContext.inputs.keys.includes(key))\r\n        const labelToAdd = labels.find((key) => !dataContext.labels.keys.includes(key))\r\n\r\n        if (inputToAdd) dataContext.addInput({ [inputToAdd]: data.map((obj) => obj[inputToAdd]) })\r\n        if (labelToAdd) dataContext.addLabel({ [labelToAdd]: data.map((obj) => obj[labelToAdd]) })\r\n    }, [data, inputs, labels, dataContext, dataContext.inputs.keys, dataContext.labels.keys])\r\n\r\n    return (\r\n        <Row style={{ alignItems: 'flex-start' }}>\r\n            <VectorColumn list={inputs} setList={setInputs} fields={fields} title={'inputs'} />\r\n            <VectorColumn list={labels} setList={setLabels} fields={fields} title={'labels'} />\r\n        </Row>\r\n    )\r\n}\r\n\r\nconst VectorColumn = ({\r\n    list,\r\n    setList,\r\n    fields,\r\n    title,\r\n}: {\r\n    setList: React.Dispatch<React.SetStateAction<string[]>>\r\n    list: string[]\r\n    fields: string[]\r\n    title: string\r\n}) => {\r\n    const [hover, setHover] = useState(false)\r\n\r\n    const handleAdd = () => {\r\n        setList((prev) => [...prev, ''])\r\n    }\r\n\r\n    const handleDelete = (i: number) => {\r\n        setList((prev) => {\r\n            prev.splice(i, 1)\r\n            return [...prev]\r\n        })\r\n    }\r\n\r\n    return (\r\n        <Column\r\n            onMouseEnter={() => setHover(true)}\r\n            onMouseLeave={() => setHover(false)}\r\n            style={{ width: '100%', position: 'relative' }}\r\n        >\r\n            <header>{title}</header>\r\n            {list.map((label, i) => (\r\n                <TextFieldContainer key={i} handleDelete={() => handleDelete(i)}>\r\n                    <TextField\r\n                        id=\"select-label\"\r\n                        value={label}\r\n                        fullWidth\r\n                        select\r\n                        onChange={(e) =>\r\n                            setList((prev) => {\r\n                                prev[i] = e.target.value as string\r\n                                return [...prev]\r\n                            })\r\n                        }\r\n                    >\r\n                        {fields.map((field) => (\r\n                            <MenuItem value={field} key={field}>\r\n                                {field}\r\n                            </MenuItem>\r\n                        ))}\r\n                    </TextField>\r\n                </TextFieldContainer>\r\n            ))}\r\n            <AddButton size=\"small\" visible={hover} onClick={handleAdd}></AddButton>\r\n        </Column>\r\n    )\r\n}\r\n\r\nconst TextFieldContainer = ({\r\n    children,\r\n    handleDelete,\r\n}: React.ComponentProps<'div'> & { handleDelete: () => void }) => {\r\n    const [hover, setHover] = useState(false)\r\n\r\n    return (\r\n        <div\r\n            style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                position: 'relative',\r\n                minWidth: '200px',\r\n            }}\r\n            onMouseEnter={() => setHover(true)}\r\n            onMouseLeave={() => setHover(false)}\r\n        >\r\n            <IconButton\r\n                size=\"small\"\r\n                style={{\r\n                    transform: `${hover ? 'scale(0.9)' : 'scale(0)'}`,\r\n                    transition: 'transform .3s',\r\n                }}\r\n                onClick={handleDelete}\r\n            >\r\n                <DeleteIcon />\r\n            </IconButton>\r\n\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst AddButton = ({ visible, ...props }: IconButtonProps & { visible: boolean }) => {\r\n    const {\r\n        palette: {\r\n            secondary: { contrastText },\r\n        },\r\n        shadows,\r\n    } = useTheme()\r\n\r\n    return (\r\n        <IconButton\r\n            {...props}\r\n            style={{\r\n                position: 'absolute',\r\n                bottom: 0,\r\n                transform: `translateY(40%) ${visible ? 'scale(0.9)' : 'scale(0)'}`,\r\n                boxShadow: shadows[1],\r\n                backgroundColor: contrastText,\r\n                transition: 'transform .3s',\r\n            }}\r\n        >\r\n            <AddIcon />\r\n        </IconButton>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\nimport StyledCard, { StyledCardHeader } from '../../components/StyledCard'\r\nimport { Row } from '../../components/Layout'\r\n\r\nimport { Button, ButtonGroup } from '@material-ui/core'\r\n\r\nimport DataFromDiskForm from './DataFromDiskForm'\r\nimport DataFromURLForm from './DataFromURLForm'\r\nimport ChooseInputOutputs from './ChooseInputOutputs'\r\nimport { useData } from '../../context/Data'\r\nimport MathFunctionGenerator from './MathFunctionGenerator'\r\n\r\nenum formState {\r\n    FILE = 'Load from disk',\r\n    URL = 'Load from URL',\r\n    MATH = 'Generate math func',\r\n}\r\n\r\nexport interface dataSubFormProps {\r\n    setFields: (fileds: string[] | undefined) => void\r\n    setData: (data: { [key: string]: string | number }[]) => void\r\n}\r\n\r\ninterface DataFormProps {\r\n    whichData: 'learningData' | 'evaluationData'\r\n    header: string\r\n}\r\n\r\nfunction DataForm({ whichData, header }: DataFormProps) {\r\n    const dataContext = useData()\r\n\r\n    const [method, setMethod] = useState(formState.FILE)\r\n\r\n    const [fields, setFields] = useState<string[] | undefined>()\r\n    const [data, setData] = useState<{ [key: string]: any }[]>([{}])\r\n\r\n    return (\r\n        <StyledCard>\r\n            <StyledCardHeader>\r\n                <h2>{header}</h2>\r\n            </StyledCardHeader>\r\n            <Row>\r\n                <ButtonGroup variant=\"contained\" size=\"small\" color=\"primary\">\r\n                    {Object.values(formState).map((value) => (\r\n                        <Button\r\n                            key={value}\r\n                            variant={'text'}\r\n                            disabled={method === value}\r\n                            size=\"small\"\r\n                            color=\"primary\"\r\n                            onClick={() => {\r\n                                setMethod(value)\r\n                                setFields(undefined)\r\n                            }}\r\n                        >\r\n                            {value}\r\n                        </Button>\r\n                    ))}\r\n                </ButtonGroup>\r\n            </Row>\r\n            <Row>\r\n                {method === formState.FILE && (\r\n                    <DataFromDiskForm setData={setData} setFields={setFields} />\r\n                )}\r\n                {method === formState.URL && (\r\n                    <DataFromURLForm setData={setData} setFields={setFields} />\r\n                )}\r\n                {method === formState.MATH && (\r\n                    <MathFunctionGenerator dataContext={dataContext[whichData]} />\r\n                )}\r\n            </Row>\r\n            {fields && (\r\n                <ChooseInputOutputs\r\n                    fields={fields}\r\n                    data={data}\r\n                    dataContext={dataContext[whichData]}\r\n                />\r\n            )}\r\n        </StyledCard>\r\n    )\r\n}\r\n\r\nexport default DataForm\r\n","const DEFAULT_MIN = 0\r\nconst DEFAULT_MAX = 50\r\nconst DEFAULT_LENGTH = 50\r\n\r\nconst getNoise = (level: number) => Math.random() * 2 * level - level\r\n\r\nconst getXs = (min: number, max: number, length: number) => {\r\n    if (length <= 0) throw new Error('length of a data vector must be a positive number')\r\n    return new Array(length).fill(0).map((x, i) => (i / length) * (max - min) + min)\r\n}\r\n\r\nconst mathFunctionGenerator = {\r\n    /**\r\n     * y = a * x + b + noise\r\n     */\r\n    linear: (params: {\r\n        a: number\r\n        b: number\r\n        noise?: number\r\n        min?: number\r\n        max?: number\r\n        length?: number\r\n    }) => {\r\n        const {\r\n            a,\r\n            b,\r\n            noise = 0,\r\n            min = DEFAULT_MIN,\r\n            max = DEFAULT_MAX,\r\n            length = DEFAULT_LENGTH,\r\n        } = params\r\n        return getXs(min, max, length).map((x) => ({ x, y: x * a + b + getNoise(noise) }))\r\n    },\r\n    /**\r\n     * y = (a + noise)^x\r\n     */\r\n    exp: (params?: { a?: number; noise?: number; min: number; max: number; length: number }) => {\r\n        const {\r\n            a = Math.E,\r\n            noise = 0,\r\n            min = DEFAULT_MIN,\r\n            max = DEFAULT_MAX,\r\n            length = DEFAULT_LENGTH,\r\n        } = params || {}\r\n        return getXs(min, max, length).map((x) => ({ x, y: Math.pow(a + getNoise(noise), x) }))\r\n    },\r\n    sin: (params: {\r\n        a: number\r\n        w: number\r\n        noise?: number\r\n        min: number\r\n        max: number\r\n        length: number\r\n    }) => {\r\n        const {\r\n            a,\r\n            w,\r\n            noise = 0,\r\n            min = DEFAULT_MIN,\r\n            max = DEFAULT_MAX,\r\n            length = DEFAULT_LENGTH,\r\n        } = params\r\n        return getXs(min, max, length).map((x) => ({\r\n            x,\r\n            y: a * (Math.sin(x * (1 / w) * (2 * Math.PI)) + getNoise(noise)),\r\n        }))\r\n    },\r\n    gauss: (params: {\r\n        a: number\r\n        sigma: number\r\n        noise?: number\r\n        min: number\r\n        max: number\r\n        length: number\r\n    }) => {\r\n        const {\r\n            a,\r\n            sigma,\r\n            noise = 0,\r\n            min = DEFAULT_MIN,\r\n            max = DEFAULT_MAX,\r\n            length = DEFAULT_LENGTH,\r\n        } = params\r\n        return getXs(min, max, length).map((x) => ({\r\n            x,\r\n            y:\r\n                (1 / Math.sqrt(2 * Math.PI * sigma * sigma)) *\r\n                    Math.exp(-Math.pow(x - a, 2) / (2 * sigma * sigma)) +\r\n                getNoise(noise),\r\n        }))\r\n    },\r\n}\r\n\r\nconst defaultParams = ['noise', 'min', 'max', 'length']\r\n\r\nexport const paramMap = {\r\n    linear: ['a', 'b'].concat(defaultParams),\r\n    exp: ['a'].concat(defaultParams),\r\n    sin: ['a', 'w'].concat(defaultParams),\r\n    gauss: ['a', 'sigma'].concat(defaultParams),\r\n}\r\n\r\nexport const defaults = {\r\n    linear: {\r\n        a: 1,\r\n        b: 1,\r\n        noise: 0,\r\n        min: DEFAULT_MIN,\r\n        max: DEFAULT_MAX,\r\n        length: DEFAULT_LENGTH,\r\n    },\r\n    exp: {\r\n        a: Math.E,\r\n        noise: 0,\r\n        min: DEFAULT_MIN,\r\n        max: DEFAULT_MAX,\r\n        length: DEFAULT_LENGTH,\r\n    },\r\n    sin: {\r\n        a: 1,\r\n        w: 25,\r\n        noise: 0,\r\n        min: DEFAULT_MIN,\r\n        max: DEFAULT_MAX,\r\n        length: DEFAULT_LENGTH,\r\n    },\r\n    gauss: {\r\n        a: 10,\r\n        sigma: 3,\r\n        noise: 0,\r\n        min: DEFAULT_MIN,\r\n        max: DEFAULT_MAX,\r\n        length: DEFAULT_LENGTH,\r\n    },\r\n}\r\n\r\nexport default mathFunctionGenerator\r\n","import React, { ChangeEvent, useState } from 'react'\r\nimport { DataObject } from '../../context/Data'\r\nimport mathFunctionGenerator, { paramMap, defaults } from '../../util/mathFunctionGenerator'\r\nimport { Button, ButtonGroup, TextField } from '@material-ui/core'\r\nimport { Row, Column } from '../../components/Layout'\r\n\r\ninterface mathFunctionGeneratoProps {\r\n    dataContext: DataObject\r\n}\r\n\r\ntype funcUnion = keyof typeof paramMap\r\n\r\nconst FUNC = Object.keys(paramMap) as funcUnion[]\r\n\r\nexport default function MathFunctionGenerator({ dataContext }: mathFunctionGeneratoProps) {\r\n    const [func, setFunction] = useState<funcUnion>(FUNC[0])\r\n    const [params, setParams] = useState<{ [key: string]: number }>(defaults[FUNC[0]])\r\n\r\n    return (\r\n        <Column>\r\n            <ButtonGroup variant=\"contained\" size=\"small\" color=\"primary\">\r\n                {FUNC.map((value) => (\r\n                    <Button\r\n                        key={value}\r\n                        variant={'text'}\r\n                        disabled={func === value}\r\n                        size=\"small\"\r\n                        color=\"primary\"\r\n                        onClick={() => {\r\n                            setFunction(value)\r\n                            setParams(defaults[value])\r\n                        }}\r\n                    >\r\n                        {value}\r\n                    </Button>\r\n                ))}\r\n            </ButtonGroup>\r\n            <Row>\r\n                {paramMap[func].map((param) => (\r\n                    <TextField\r\n                        key={param}\r\n                        id={param}\r\n                        label={param}\r\n                        type=\"number\"\r\n                        value={params[param].toString()}\r\n                        onChange={(e: ChangeEvent<HTMLInputElement>) => {\r\n                            setParams((prev) => ({ ...prev, [param]: e.target.valueAsNumber }))\r\n                        }}\r\n                    />\r\n                ))}\r\n            </Row>\r\n            <Button\r\n                onClick={() => {\r\n                    const generated = mathFunctionGenerator[func](params as any)\r\n                    dataContext.addInput({ x: generated.map(({ x }) => x) })\r\n                    dataContext.addLabel({ y: generated.map(({ y }) => y) })\r\n                }}\r\n            >\r\n                Ok\r\n            </Button>\r\n        </Column>\r\n    )\r\n}\r\n","import React from 'react'\r\n\r\nimport DataForm from './dataForm/DataForm'\r\n\r\nexport default function TrainingDataForm() {\r\n    return <DataForm whichData={'learningData'} header={'learning data'}/>\r\n}\r\n","import React from 'react'\r\n\r\nimport DataForm from './dataForm/DataForm'\r\n\r\nexport default function TrainingDataForm() {\r\n    return <DataForm whichData={'evaluationData'} header={'evaluation data'} />\r\n}\r\n","import { Checkbox, FormControlLabel, TextField } from '@material-ui/core'\r\nimport { Row } from '../components/Layout'\r\nimport { useTensorflow } from '../context/Tensorflow'\r\n\r\nexport default function LearningSettings() {\r\n    const {\r\n        learningSettings: { batchSize, epochs, normalize },\r\n        setLearningOption,\r\n    } = useTensorflow()\r\n\r\n    return (\r\n        <>\r\n            <Row>\r\n                <TextField\r\n                    id=\"Epochs\"\r\n                    label=\"Epochs\"\r\n                    type=\"number\"\r\n                    value={epochs.toString()}\r\n                    onChange={(e) => {\r\n                        setLearningOption({ epochs: e.target.valueAsNumber })\r\n                    }}\r\n                />\r\n                <TextField\r\n                    id=\"BatchSize\"\r\n                    label=\"BatchSize\"\r\n                    type=\"number\"\r\n                    value={batchSize.toString()}\r\n                    onChange={(e) => {\r\n                        setLearningOption({ batchSize: e.target.valueAsNumber })\r\n                    }}\r\n                />\r\n                <FormControlLabel\r\n                    control={\r\n                        <Checkbox\r\n                            color=\"primary\"\r\n                            checked={normalize}\r\n                            onChange={() => {\r\n                                setLearningOption({ normalize: !normalize })\r\n                            }}\r\n                            name=\"Normalize\"\r\n                        />\r\n                    }\r\n                    label=\"Normalize data\"\r\n                />\r\n            </Row>\r\n        </>\r\n    )\r\n}\r\n","import React from 'react'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport Menu from '@material-ui/core/Menu'\r\n\r\ninterface PopMenuProps {\r\n    options: string[]\r\n    handleClose: () => void\r\n    onChange: (value: string) => void\r\n    open: boolean\r\n    anchorEl: HTMLElement | null | undefined\r\n    value: string | undefined\r\n}\r\n\r\nexport default function PopMenu({\r\n    options,\r\n    handleClose,\r\n    open,\r\n    anchorEl,\r\n    value,\r\n    onChange,\r\n}: PopMenuProps) {\r\n    return (\r\n        <Menu id=\"simple-menu\" anchorEl={anchorEl} keepMounted open={open} onClose={handleClose}>\r\n            {options.map((op) => (\r\n                <MenuItem\r\n                    onClick={() => {\r\n                        onChange(op)\r\n                        handleClose()\r\n                    }}\r\n                    selected={op === value}\r\n                >\r\n                    {op}\r\n                </MenuItem>\r\n            ))}\r\n        </Menu>\r\n    )\r\n}\r\n","import React, { useRef, useCallback, useEffect, forwardRef, useState } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport { Chart, registerables } from 'chart.js'\r\nimport type { ChartOptions, ChartData, ChartType } from 'chart.js'\r\nimport PopMenu from './PopMenu'\r\n\r\nChart.register(...registerables)\r\nexport interface ChartProps {\r\n    data: ChartData\r\n    options: ChartOptions\r\n    type?: ChartType\r\n    id: string\r\n    xkeys?: string[]\r\n    ykeys?: string[]\r\n}\r\n\r\nconst plugin = {\r\n    id: 'custom_canvas_background_color',\r\n    beforeDraw: (chart: Chart) => {\r\n        const ctx = chart.canvas.getContext('2d')!\r\n        const color = '#fff'\r\n\r\n        ctx.save()\r\n        ctx.globalCompositeOperation = 'destination-over'\r\n        ctx.fillStyle = color ? color : 'transparent'\r\n        ctx.fillRect(0, 0, chart.width, chart.height)\r\n        ctx.restore()\r\n    },\r\n}\r\n\r\n/**\r\n * React Component wrapper for Chart.js , more on usage and props on: https://www.chartjs.org/docs/latest/\r\n *\r\n * default chart type is \"scatter\"\r\n */\r\nexport default forwardRef<HTMLCanvasElement, ChartProps>(function ChartComponent(\r\n    { data, options, type = 'scatter', id, ykeys, xkeys, ...props },\r\n    ref\r\n) {\r\n    const chartInstance = useRef<Chart>({\r\n        update: () => {},\r\n        destroy: () => {},\r\n    } as Chart)\r\n\r\n    if (!id) console.warn('id must be provided on chart component')\r\n\r\n    useEffect(() => {\r\n        if (chartInstance.current) {\r\n            chartInstance.current.data = data\r\n            chartInstance.current.update('normal')\r\n        }\r\n    }, [data])\r\n\r\n    const [xAxisKey, setXAxisKey] = useState<string>()\r\n    const [yAxisKey, setYAxisKey] = useState<string>()\r\n\r\n    useEffect(() => {\r\n        if (xkeys && xkeys.length) setXAxisKey(xkeys[xkeys?.length - 1])\r\n    }, [xkeys])\r\n\r\n    useEffect(() => {\r\n        if (ykeys && ykeys.length) setYAxisKey(ykeys[ykeys?.length - 1])\r\n    }, [ykeys])\r\n\r\n    const [xOptions, setXOptions] = useState(false)\r\n    const [yOptions, setYOptions] = useState(false)\r\n    const xButton = useRef(null)\r\n    const yButton = useRef(null)\r\n\r\n    const canvasRef = useCallback<(instance: HTMLCanvasElement | null) => void>(\r\n        (reference) => {\r\n            chartInstance.current.destroy()\r\n\r\n            if (reference) {\r\n                const chart = new Chart(reference, {\r\n                    type,\r\n                    data,\r\n                    options: {\r\n                        parsing: {\r\n                            xAxisKey,\r\n                            yAxisKey,\r\n                        },\r\n                        scales: {\r\n                            x: {\r\n                                title: {\r\n                                    display: true,\r\n                                    text: xAxisKey,\r\n                                    font: {\r\n                                        size: 10,\r\n                                    },\r\n                                },\r\n                            },\r\n                            y: {\r\n                                title: {\r\n                                    display: true,\r\n                                    text: yAxisKey,\r\n                                    font: {\r\n                                        size: 10,\r\n                                    },\r\n                                },\r\n                            },\r\n                        },\r\n                        ...options,\r\n                    },\r\n                    plugins: [plugin],\r\n                })\r\n                chartInstance.current = chart\r\n            }\r\n        },\r\n        [data, options, type, xAxisKey, yAxisKey]\r\n    )\r\n\r\n    return (\r\n        <div style={{ position: 'relative', width: '100%' }}>\r\n            {ykeys && ykeys?.length > 1 && (\r\n                <>\r\n                    <InvisibleButton\r\n                        style={{ width: '2em', height: '80%', left: 0, top: 0 }}\r\n                        ref={yButton}\r\n                        onClick={() => setYOptions(true)}\r\n                    ></InvisibleButton>\r\n                    <PopMenu\r\n                        anchorEl={yButton.current}\r\n                        onChange={(v) => setYAxisKey(v)}\r\n                        value={yAxisKey}\r\n                        handleClose={() => setYOptions(false)}\r\n                        options={ykeys}\r\n                        open={yOptions}\r\n                    />\r\n                </>\r\n            )}\r\n            {xkeys && xkeys?.length > 1 && (\r\n                <>\r\n                    <InvisibleButton\r\n                        style={{ width: '80%', height: '2em', right: 0, bottom: 0 }}\r\n                        ref={xButton}\r\n                        onClick={() => setXOptions(true)}\r\n                    ></InvisibleButton>\r\n                    <PopMenu\r\n                        anchorEl={xButton.current}\r\n                        onChange={(v) => setXAxisKey(v)}\r\n                        value={xAxisKey}\r\n                        handleClose={() => setXOptions(false)}\r\n                        options={xkeys}\r\n                        open={xOptions}\r\n                    />\r\n                </>\r\n            )}\r\n            <canvas ref={canvasRef} id={id}></canvas>\r\n        </div>\r\n    )\r\n})\r\n\r\nconst InvisibleButton = styled.button`\r\n    opacity: 0;\r\n    position: absolute;\r\n    padding: 0;\r\n    cursor: pointer;\r\n`\r\n\r\nexport { Chart }\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport ChartComponent, { Chart } from '../components/Chart'\r\nimport { ChartContainerProps } from './ChartContainer'\r\n\r\nimport Modal, { ModalProps } from '@material-ui/core/Modal'\r\nimport StyledCard from '../components/StyledCard'\r\nimport Fade from '@material-ui/core/Fade'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport { Button } from '@material-ui/core'\r\n\r\ninterface ChartFullScreenProps extends Pick<ModalProps, 'open' | 'onClose'>, ChartContainerProps {\r\n    id: string\r\n}\r\n\r\nexport default function ChartFullScreen({\r\n    id,\r\n    open,\r\n    onClose,\r\n    title,\r\n    options,\r\n    data,\r\n    type,\r\n    xkeys,\r\n    ykeys,\r\n}: ChartFullScreenProps) {\r\n    const MODAL_CHART_ID = `${id}-modal`\r\n\r\n    const downloadPicture = () => {\r\n        const chart = Chart.getChart(MODAL_CHART_ID)\r\n        const image = chart!.toBase64Image('image/jpeg')\r\n\r\n        const downloadLink = document.createElement('a')\r\n        downloadLink.href = image!\r\n        downloadLink.download = title\r\n        downloadLink.click()\r\n    }\r\n\r\n    return (\r\n        <StyledModal\r\n            open={open}\r\n            onClose={onClose}\r\n            closeAfterTransition\r\n            BackdropComponent={Backdrop}\r\n            BackdropProps={{\r\n                timeout: 400,\r\n            }}\r\n        >\r\n            <Fade in={open} timeout={400}>\r\n                <ModalCard>\r\n                    <Header>{title && <h2>{title}</h2>}</Header>\r\n                    <ChartComponent\r\n                        data={data}\r\n                        options={options}\r\n                        id={MODAL_CHART_ID}\r\n                        type={type}\r\n                        xkeys={xkeys}\r\n                        ykeys={ykeys}\r\n                    />\r\n                    <Button\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        onClick={() => downloadPicture()}\r\n                        style={{ margin: '1em' }}\r\n                    >\r\n                        Download Image\r\n                    </Button>\r\n                </ModalCard>\r\n            </Fade>\r\n        </StyledModal>\r\n    )\r\n}\r\n\r\nconst ModalCard = styled(StyledCard)`\r\n    max-width: unset;\r\n    width: 80vw;\r\n`\r\n\r\nconst StyledModal = styled(Modal)`\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n`\r\nconst Header = styled.header`\r\n    display: flex;\r\n    width: 100%;\r\n`\r\n","import React, { useState } from 'react'\r\nimport styled from 'styled-components'\r\nimport ChartComponent, { ChartProps, Chart } from './Chart'\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen'\r\nimport IconButton from '@material-ui/core/IconButton'\r\n// import SettingsIcon from '@material-ui/icons/Settings'\r\n\r\nimport ChartFullScreen from './ChartFullScreen'\r\nimport useChartData from '../hooks/useChartData'\r\n// import useDeepEquality from '../hooks/useDeepEquality'\r\n\r\n/* import Modal from '@material-ui/core/Modal'\r\nimport StyledCard from '../components/StyledCard'\r\nimport Fade from '@material-ui/core/Fade'\r\nimport Backdrop from '@material-ui/core/Backdrop'\r\nimport { Select, MenuItem, Input, InputLabel, FormControl } from '@material-ui/core' */\r\n\r\nexport interface ChartContainerProps extends ChartProps {\r\n    title: string\r\n}\r\n\r\nexport default function ChartContainer({\r\n    title,\r\n    data,\r\n    options,\r\n    type,\r\n    id,\r\n    xkeys,\r\n    ykeys,\r\n    ...props\r\n}: ChartContainerProps) {\r\n    const [modalOpen, setModaleOpen] = useState(false)\r\n    // const [settingsOpen, setSettingsOpen] = useState(false)\r\n\r\n    const chartData = useChartData(data)\r\n\r\n    return (\r\n        <>\r\n            <Container {...props}>\r\n                <Header>\r\n                    {title && <h3>{title}</h3>}\r\n                    {/*  <IconButton\r\n                        size=\"small\"\r\n                        color=\"inherit\"\r\n                        style={{ marginLeft: 'auto' }}\r\n                        onClick={() => setSettingsOpen(true)}\r\n                    >\r\n                        <SettingsIcon />\r\n                    </IconButton> */}\r\n                    <IconButton\r\n                        size=\"small\"\r\n                        color=\"inherit\"\r\n                        style={{ marginLeft: 'auto' }}\r\n                        onClick={() => setModaleOpen(true)}\r\n                    >\r\n                        <FullscreenIcon />\r\n                    </IconButton>\r\n                </Header>\r\n                <ChartComponent\r\n                    data={chartData}\r\n                    options={options}\r\n                    id={id}\r\n                    type={type}\r\n                    xkeys={xkeys}\r\n                    ykeys={ykeys}\r\n                />\r\n            </Container>\r\n            <ChartFullScreen\r\n                title={title}\r\n                data={chartData}\r\n                options={options}\r\n                id={id}\r\n                open={modalOpen}\r\n                type={type}\r\n                onClose={() => setModaleOpen(false)}\r\n                xkeys={xkeys}\r\n                ykeys={ykeys}\r\n            />\r\n            {/*  <Modal\r\n                open={settingsOpen}\r\n                onClose={() => setSettingsOpen(false)}\r\n                closeAfterTransition\r\n                BackdropComponent={Backdrop}\r\n                BackdropProps={{\r\n                    timeout: 400,\r\n                }}\r\n                style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}\r\n            >\r\n                <Fade in={settingsOpen} timeout={400}>\r\n                    <StyledCard>\r\n                        <Header>{title && <h2>{title} chart options</h2>}</Header>\r\n                        <Select\r\n                            labelId={'x'}\r\n                            value={options.scales.x.title}\r\n                            onChange={(e) => {\r\n                                setOptimizer(e.target.value)\r\n                            }}\r\n                        >\r\n                            {.map((value) => (\r\n                                <MenuItem value={value} key={value}>\r\n                                    {value}\r\n                                </MenuItem>\r\n                            ))}\r\n                        </Select>\r\n                    </StyledCard>\r\n                </Fade>\r\n            </Modal> */}\r\n        </>\r\n    )\r\n}\r\n\r\nconst Container = styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 100%;\r\n    padding: 0.5em;\r\n    /*  align-items: center; */\r\n\r\n    color: var(--secondary-font-color);\r\n`\r\n\r\nconst Header = styled.header`\r\n    display: flex;\r\n    width: 100%;\r\n`\r\n\r\nconst InvisibleButton = styled.button`\r\n    opacity: 0;\r\n    position: absolute;\r\n    padding: 0;\r\n    cursor: pointer;\r\n`\r\n","import { useState, useEffect } from 'react'\r\nimport type { ChartData } from 'chart.js'\r\nimport deepEqual from 'deep-equal'\r\n\r\n// useDeepEquality but more specific\r\n// might swap for more generic in the future\r\n\r\n/**\r\n * updates data only when something changes according to deep equality\r\n *\r\n * normally react compares props with Object.is() algorithm,\r\n * which returns true only if compared objects are the same object in memory\r\n * for example {} === {} is false\r\n * deep equality on the other hand in example above qould return true because compared objects are composed from same values\r\n * */\r\nexport default function useChartData(data: ChartData) {\r\n    const [chartData, setChartData] = useState<ChartData>(data)\r\n\r\n    useEffect(() => {\r\n        const shouldUpdate = !deepEqual(chartData.datasets, data.datasets)\r\n        if (shouldUpdate) setChartData(data)\r\n    }, [data, chartData])\r\n\r\n    return chartData\r\n}\r\n","import { useTheme } from '@material-ui/core'\r\nimport React from 'react'\r\n\r\nexport default function ErrorMessage({ children, ...props }: React.ComponentProps<'div'>) {\r\n    const {\r\n        palette: {\r\n            error: { main: color },\r\n        },\r\n    } = useTheme()\r\n\r\n    return <div style={{ color, margin: '1em' }}>{children}</div>\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport { Button } from '@material-ui/core'\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow'\r\nimport PauseIcon from '@material-ui/icons/Pause'\r\n\r\nimport StyledCard, { StyledCardHeader } from '../components/StyledCard'\r\nimport { Row } from '../components/Layout'\r\nimport { useTheme } from '@material-ui/core/styles'\r\n\r\nimport { onEpochEndCallback, useTensorflow } from '../context/Tensorflow'\r\nimport { useData } from '../context/Data'\r\nimport LearningSettings from './LearningSettings'\r\nimport ChartContainer from '../components/ChartContainer'\r\nimport ErrorMessage from '../components/ErrorMessage'\r\n\r\nexport default function TrainingSection() {\r\n    const [errors, setErrors] = useState<Error>()\r\n\r\n    const {\r\n        trainModel,\r\n        stopTraining,\r\n        isCompiled,\r\n        isTraining,\r\n        modelSettings: { metric },\r\n        learningSettings: { epochs },\r\n    } = useTensorflow()\r\n\r\n    const [trainingLogs, setTrainingLogs] = useState<{ [key: string]: number }[]>([])\r\n    const [trainingValLogs, setTrainingValLogs] = useState<{ [key: string]: number }[]>([])\r\n    const [trainingEffects, setTrainingEffects] = useState<{ [key: string]: number }[]>([])\r\n\r\n    const { learningData } = useData()\r\n\r\n    const {\r\n        palette: {\r\n            primary: { main: MainColor },\r\n            secondary: { main: SecondaryColor },\r\n        },\r\n    } = useTheme()\r\n\r\n    const onEpochEndCallback: onEpochEndCallback = async ({ metric, val }, currentPrediction) => {\r\n        setTrainingLogs((prev) => [...prev, metric])\r\n        setTrainingValLogs((prev) => [...prev, val])\r\n        setTrainingEffects(currentPrediction)\r\n    }\r\n\r\n    const onTrainBeginCallback = () => {\r\n        setTrainingLogs([])\r\n        setTrainingValLogs([])\r\n        setTrainingEffects([])\r\n    }\r\n\r\n    const handleTrainModel = async () => {\r\n        try {\r\n            await trainModel({ onEpochEndCallback, onTrainBeginCallback })\r\n        } catch (error) {\r\n            setErrors(error)\r\n        }\r\n    }\r\n    return (\r\n        <StyledCard>\r\n            <ChartContainer\r\n                title={'Data Visualization'}\r\n                id={'Data Visualization'}\r\n                data={{\r\n                    datasets: [\r\n                        {\r\n                            data: learningData.scatter as any,\r\n                            label: 'Learning data',\r\n                        },\r\n                        {\r\n                            data: trainingEffects as any,\r\n                            label: 'Prediction',\r\n                            showLine: true,\r\n                            backgroundColor: SecondaryColor,\r\n                            borderColor: SecondaryColor,\r\n                            pointRadius: 1,\r\n                        },\r\n                    ],\r\n                }}\r\n                options={{\r\n                    animation: false,\r\n                }}\r\n                xkeys={learningData.inputs.keys}\r\n                ykeys={learningData.labels.keys}\r\n            />\r\n            <ChartContainer\r\n                data={{\r\n                    datasets: [\r\n                        {\r\n                            data: trainingLogs as any,\r\n                            label: metric,\r\n                            borderColor: MainColor,\r\n                            backgroundColor: MainColor,\r\n                            showLine: true,\r\n                            pointRadius: 0,\r\n                        },\r\n                        {\r\n                            data: trainingValLogs as any,\r\n                            label: `Validation error`,\r\n                            borderColor: SecondaryColor,\r\n                            backgroundColor: SecondaryColor,\r\n                            showLine: true,\r\n                            pointRadius: 0,\r\n                        },\r\n                    ],\r\n                }}\r\n                options={{\r\n                    animation: false,\r\n                    scales: {\r\n                        x: {\r\n                            title: {\r\n                                display: true,\r\n                                text: 'Epoch',\r\n                            },\r\n                            max: epochs > 0 ? epochs : 1,\r\n                            min: 0,\r\n                        },\r\n                    },\r\n                }}\r\n                title={'Learning curve'}\r\n                id={'LearningCurve'}\r\n            />\r\n\r\n            <StyledCardHeader>\r\n                <h3>Training options</h3>\r\n            </StyledCardHeader>\r\n            <LearningSettings />\r\n            <Row>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                    onClick={isTraining ? stopTraining : handleTrainModel}\r\n                    endIcon={isTraining ? <PauseIcon /> : <PlayArrowIcon />}\r\n                    disabled={!isCompiled && !isTraining}\r\n                >\r\n                    {isTraining ? 'stop' : 'Train'}\r\n                </Button>\r\n            </Row>\r\n            {errors && <ErrorMessage>{`${errors.name}:  ${errors.message}`}</ErrorMessage>}\r\n        </StyledCard>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport { Button } from '@material-ui/core'\r\n\r\nimport StyledCard from '../components/StyledCard'\r\nimport { Row } from '../components/Layout'\r\nimport { useTheme } from '@material-ui/core/styles'\r\n\r\nimport { useTensorflow } from '../context/Tensorflow'\r\nimport { useData } from '../context/Data'\r\nimport ChartContainer from '../components/ChartContainer'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport ErrorMessage from '../components/ErrorMessage'\r\n\r\nexport default function TrainingSection() {\r\n    const [errors, setErrors] = useState()\r\n\r\n    const { isCompiled, evaulateData } = useTensorflow()\r\n    const [evaluationResults, setEvaluationResults] = useState({ evaluation: ['', ''] })\r\n\r\n    const { evaluationData } = useData()\r\n\r\n    const {\r\n        palette: {\r\n            primary: { main: MainColor },\r\n            secondary: { main: SecondaryColor },\r\n        },\r\n    } = useTheme()\r\n\r\n    return (\r\n        <StyledCard>\r\n            <ChartContainer\r\n                title={'Data Evaluation'}\r\n                id={'Data Evaluation'}\r\n                data={{\r\n                    datasets: [\r\n                        {\r\n                            data: evaluationData.scatter,\r\n                            label: 'Evaulation Data',\r\n                        },\r\n                        {\r\n                            data: evaluationResults.prediction,\r\n                            label: 'Prediction',\r\n                            backgroundColor: MainColor,\r\n                            borderColor: MainColor,\r\n                        },\r\n                        {\r\n                            data: evaluationResults.error,\r\n                            label: 'Error',\r\n                            backgroundColor: SecondaryColor,\r\n                            borderColor: SecondaryColor,\r\n                        },\r\n                    ],\r\n                }}\r\n                options={{\r\n                    animation: true,\r\n                }}\r\n                xkeys={evaluationData.inputs.keys}\r\n                ykeys={evaluationData.labels.keys}\r\n            />\r\n            <Row>\r\n                <TextField\r\n                    label={'metric loss loss'}\r\n                    inputProps={{ readOnly: true }}\r\n                    value={evaluationResults.evaluation[0].toString()}\r\n                />\r\n                <TextField\r\n                    label={'validation loss'}\r\n                    inputProps={{ readOnly: true }}\r\n                    value={evaluationResults.evaluation[1].toString()}\r\n                    variant=\"outlined\"\r\n                />\r\n            </Row>\r\n            <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                onClick={async () => {\r\n                    try {\r\n                        const { error, prediction, evaluation } = evaulateData()\r\n                        setEvaluationResults({ error, prediction, evaluation })\r\n                    } catch (e) {\r\n                        setErrors(e)\r\n                    }\r\n                }}\r\n                disabled={!isCompiled}\r\n            >\r\n                Evaulate\r\n            </Button>\r\n            {errors && <ErrorMessage>{errors.message}</ErrorMessage>}\r\n        </StyledCard>\r\n    )\r\n}\r\n","import React, { useState } from 'react'\r\n\r\nimport { Button, IconButton } from '@material-ui/core'\r\nimport SettingsIcon from '@material-ui/icons/Settings'\r\n\r\nimport StyledCard from '../components/StyledCard'\r\nimport { Container, Column, Row } from '../components/Layout'\r\nimport { useTheme } from '@material-ui/core/styles'\r\n\r\nimport { useTensorflow } from '../context/Tensorflow'\r\nimport LayersControls from '../containers/LayersControls'\r\nimport NetworkDiagram from '../components/NetworkDiagram'\r\nimport ModelOptions from '../containers/ModelOptions'\r\nimport TrainingDataForm from '../containers/TrainingDataForm'\r\nimport EvaluationDataForm from '../containers/EvaluationDataForm'\r\nimport TrainingSection from '../containers/TrainingSection'\r\nimport EvaluationSection from '../containers/EvaluationSection'\r\n\r\nexport default function Main() {\r\n    const {\r\n        compileModel,\r\n        isCompiled,\r\n        modelSettings: { layers },\r\n    } = useTensorflow()\r\n\r\n    const {\r\n        palette: {\r\n            primary: { main: MainColor },\r\n        },\r\n    } = useTheme()\r\n\r\n    console.log('render')\r\n\r\n    return (\r\n        <Container>\r\n            {/* Model section */}\r\n            <Column gridName={'model'}>\r\n                <Column.Header>Model</Column.Header>\r\n                <StyledCard>\r\n                    <StyledCard.Header>\r\n                        <h2>Network structure</h2>\r\n                        <IconButton size=\"small\" color=\"inherit\">\r\n                            <SettingsIcon />\r\n                        </IconButton>\r\n                    </StyledCard.Header>\r\n\r\n                    <NetworkDiagram layers={layers.map((layer) => layer.units)} color={MainColor} />\r\n\r\n                    <LayersControls />\r\n\r\n                    <StyledCard.Header>\r\n                        <h2>Model options</h2>\r\n                    </StyledCard.Header>\r\n                    <ModelOptions />\r\n                    <Row>\r\n                        <Button\r\n                            variant=\"contained\"\r\n                            color=\"primary\"\r\n                            onClick={compileModel}\r\n                            disabled={isCompiled}\r\n                        >\r\n                            {isCompiled ? 'Compiled' : 'Compile model'}\r\n                        </Button>\r\n                        <Button color=\"primary\" onClick={compileModel}>\r\n                            Reset model\r\n                        </Button>\r\n                    </Row>\r\n                </StyledCard>\r\n            </Column>\r\n\r\n            {/* Training section */}\r\n            <Column gridName={'training'}>\r\n                <Column.Header>Training</Column.Header>\r\n\r\n                <TrainingDataForm />\r\n                <TrainingSection />\r\n            </Column>\r\n            {/* Evaulation section */}\r\n            <Column gridName={'evaulation'}>\r\n                <Column.Header>Evaluation</Column.Header>\r\n                <EvaluationDataForm />\r\n\r\n                <EvaluationSection />\r\n            </Column>\r\n        </Container>\r\n    )\r\n}\r\n","import { DataProvider } from './context/Data'\nimport { TensorflowProvider } from './context/Tensorflow'\nimport Main from './pages/Main'\nimport { GlobalStyles } from './styles/globalStyles'\nimport { theme } from './styles'\nimport { ThemeProvider } from '@material-ui/core/styles'\n\nexport default function App() {\n    return (\n        <>\n            <DataProvider>\n                <TensorflowProvider>\n                    <ThemeProvider theme={theme}>\n                        <GlobalStyles theme={theme} />\n                        <Main />\n                    </ThemeProvider>\n                </TensorflowProvider>\n            </DataProvider>\n        </>\n    )\n}\n","/* import './wdyr' // <--- for debugging only */\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals()\n"],"sourceRoot":""}